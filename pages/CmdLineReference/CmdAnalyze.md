---
title: Analyze command
summary: Collects statistics for a table or schema.
keywords: analyze, analyze command, statistics, stats, sample statistics, sampled, collection, analyze table, analyze schema, collect statistics
toc: false
product: all
sidebar: cmdlineref_sidebar
permalink: cmdlineref_analyze.html
folder: CmdLineReference
---
<section>
<div class="TopicContent" data-swiftype-index="true" markdown="1">
# Analyze Command

The <span class="AppCommand">analyze</span> command collects statistics
for a specific table, or for an entire schema.

Once statistics have been collected for a schema or table, they are
automatically used by the query optimizer.
{: .noteNote}

## Syntax

<div class="fcnWrapperWide" markdown="1">
    ANALYZE TABLE [schemaName '.'] table-Name [ESTIMATE STATISTICS SAMPLE samplepercent PERCENT];
    ANALYZE SCHEMA schema-Name;
{: .FcnSyntax xml:space="preserve"}

</div>
<div class="paramList" markdown="1">
table-Name
{: .paramName}

The name of the table you want to analyze, which can optionally be
qualified by its schema name. If you don't specify a *schemaName*, the
current schema is assumed.
{: .paramDefnFirst}

You must have insert permission for the table to be able to run this
command.
{: .paramDefn}

schema-Name
{: name="paramName" .paramName}

The name of the schema you want to analyze.
{: .paramDefnFirst}

You must have insert permission for all tables in the schema to be able
to run this command.
{: .paramDefn}

samplepercent
{: name="paramName" .paramName}

A value between `0` and `100` that specifies the sampling percentage to
use when generating statistics for this table.
{: .paramDefnFirst}

If you include this clause, statistics are generated by sampling the
specified sampling percentage of the table. This can significantly
reduce the overhead associated with generating statistics.
{: .paramDefn}

If you do not include this clause, statistics are generated based on the
full table.
{: .paramDefn}

.
{: .paramDefnFirst}

</div>
### Analyze Table   {#Table}

The `ANALYZE TABLE` command collects statistics for a specific table in
the current schema. It also collects statistics for the index associated
with the table in the schema. For example, if you have the following in
your database:

* a table named `myTable`
* `myTable` has two indices: `myTableIndex1` and `myTableIndex2`

Then `ANALYZE TABLE` will collect statistics for `myTable`,
`myTableIndex1`, and `myTableIndex2`.

The `ANALYZE TABLE` command displays the following information for each
partition of the table:

<table summary="List of columns in the output of the analyze table command.">
            <col />
            <col />
            <thead>
                <tr>
                    <th>Value</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>schemaName</code></td>
                    <td>The name of the schema.</td>
                </tr>
                <tr>
                    <td><code>tableName</code></td>
                    <td>The name of the table.</td>
                </tr>
                <tr>
                    <td><code>partition</code></td>
                    <td>The Splice Machine partition. We merge the statistics for all table partitions, so the partition will show as <code>-All-</code> when you specify one of the non-merged type values for the <code>statsType</code> parameter.</td>
                </tr>
                <tr>
                    <td><code>rowsCollected</code></td>
                    <td>The total number of rows collected for the table.</td>
                </tr>
                <tr>
                    <td><code>partitionSize</code></td>
                    <td>The combined size of the table's partitions.</td>
                </tr>
                <tr>
                    <td><code>statsType</code></td>
                    <td><p>The type of statistics, which is one of these values:</p>
                        <table>
                            <col />
                            <col />
                            <tbody>
                                <tr>
                                    <td>0</td>
                                    <td>Full table (not sampled) statistics that reflect the unmerged partition values.</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Sampled statistics that reflect the unmerged partition values.</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Full table (not sampled) statistics that reflect the table values after all partitions have been merged.</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Sampled statistics that reflect the table values after all partitions have been merged.</td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td><code>sampleFraction</code></td>
                    <td>
                        <p>The sampling percentage, expressed as <code>0.0</code> to <code>1.0</code>, </p>
                        <ul>
                            <li>If <code>statsType=0</code> or <code>statsType=1</code> (full statistics), this value is not used, and is shown as <code>0</code>.</li>
                            <li>If <code>statsType=2</code> or <code>statsType=3</code>, this value is the percentage or rows to be sampled. A value of <code>0</code> means no rows, and a value of <code>1</code> means all rows (same as full statistics).</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
### Analyze Schema   {#Schema}

The `ANALYZE SCHEMA` command collects statistics for every table in the
schema. It also collects statistics for the index associated with every
table in the schema. For example, if you have the following situation:

* a schema named `mySchema`
* `mySchema` contains two tables: `myTable1` and `myTable2`
* `myTable1` has two indices: `myTable1Index1` and `myTable1Index2`

Then the `ANALYZE SCHEMA` command will collect statistics for
`myTable1`, `myTable2`, `myTable1Index1`, and `myTable1Index2`.

The `ANALYZE SCHEMA` command displays the same information as shown for
`ANALYZE TABLE`, for each table in the in the schema.

This command operates like the
[`SYSCS_UTIL.COLLECT_SCHEMA_STATISTICS`](sqlref_sysprocs_collectschemastats.html)
built-in system procedure.
{: .noteNote}

## Examples

<div class="preWrapperWide" markdown="1">
    splice> analyze table test.t2;
    schemaName |tableName |partition |rowsCollec&|partitionSize |partitionCount  |statsType  |sampleFraction
    -----------------------------------------------------------------------------------------------------------------
    TEST       |T2        |-All-     |39226      |235356        |1               |2          |0

    1 rows selected
    splice>splice> analyze table test.t2 estimate statistics sample 50 percent;
    schemaName |tableName |partition |rowsCollec&|partitionSize |partitionCount  |statsType  |sampleFraction
    -----------------------------------------------------------------------------------------------------------------
    TEST       |T2        |-All-     |19613      |235356        |1               |3          |0.5

    1 rows selected
    splice>splice> analyze schema test;
    schemaName |tableName |partition |rowsCollec&|partitionSize |partitionCount  |statsType  |sampleFraction
    -----------------------------------------------------------------------------------------------------------------
    TEST       |T2        |-All-     |39226      |235356        |1               |2          |0
    TEST       |T5        |-All-     |39226      |235356        |1               |2          |0
    2 rows selected
    splice>
{: .AppCommand}

</div>
</div>
</section>
