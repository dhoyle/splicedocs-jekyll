---
title: CREATE EXTERNAL TABLE statement
summary: Allows you to query data stored in a flat file as if that data were stored in a Splice Machine table.
keywords: external tables, orc, parquet, textfile, compression, encoding, separator
toc: false
product: all
sidebar:  sqlref_sidebar
permalink: sqlref_statements_createexternaltable.html
folder: SQLReference/Statements
---
{% include splicevars.html %}
<section>
<div class="TopicContent">
<h1 id="Statements.CreateTable">CREATE EXTERNAL TABLE</h1>
<!-- ADD Avro, back into list after ORC -->
<p>A <span class="CodeFont">CREATE EXTERNAL&nbsp;TABLE</span> statement creates a table in Splice Machine that you can use to query data that is stored externally in a flat file, such as a file in Parquet, ORC, or plain text format. External tables are largely used as a convenient means of moving data into and out of your database.</p>
<p>You can query external tables just as you would a regular Splice&nbsp;Machine table; however, you cannot perform any DML&nbsp;operations on an external table, once it has been created. That also means that you cannot create an index on an external table.</p>
<div class="noteImportant">If the schema of the external file that you are querying is modified outside of Splice, you need to manually refresh the Splice&nbsp;Machine table by calling the <span class="CodeFont"><a href="sqlref_sysprocs_refreshexttable.html">REFRESH&nbsp;EXTERNAL&nbsp;TABLE</a></span>&nbsp;built-in system procedure.</div>
<p>If a qualified table name is specified, the schema name cannot begin with <span class="CodeFont">SYS</span>.</p>
<h2>Syntax</h2>
<div class="fcnWrapperWide">
<pre class="FcnSyntax" xml:space="preserve">CREATE EXTERNAL&nbsp;TABLE <span class="ItalicFont"><a href="sqlref_identifiers_types.html#TableName">table-Name</a></span>
  {
    ( <span class="ItalicFont"><a href="sqlref_statements_columndef.html">column-definition</a></span>]* )<br /> &nbsp;&nbsp;&nbsp;[&nbsp;COMPRESSED&nbsp;WITH&nbsp;<span class="ItalicFont">compression-format</span> ]
 &nbsp;&nbsp; [ PARTITIONED&nbsp;BY&nbsp;(<span class="ItalicFont">column-name</span> ) ]}
&nbsp;&nbsp;&nbsp;&nbsp;[ ROW&nbsp;FORMAT&nbsp;DELIMITED<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ FIELDS&nbsp;TERMINATED&nbsp;BY&nbsp;<span class="ItalicFont">char</span> [ESCAPED&nbsp;BY&nbsp;<span class="ItalicFont">char</span>] ]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ LINES&nbsp;TERMINATED&nbsp;BY&nbsp;<span class="ItalicFont">char</span> ]<br />&nbsp;&nbsp;&nbsp;&nbsp;]<br />&nbsp;&nbsp;&nbsp;&nbsp;STORED&nbsp;AS <span class="ItalicFont">file-format</span> LOCATION&nbsp;<span class="ItalicFont">location</span><br />&nbsp;&nbsp;}</pre>
</div>
<div class="paramList">
<p class="paramName">table-Name</p>
<p class="paramDefnFirst">The name to assign to the new table.</p>
<p class="paramName">compression-format</p>
<p class="paramDefnFirst">The compression algorithm used to compress the flat file source of this external table. You can specify one of the following values:</p>
<ul class="bulletNested">
<li><span class="CodeFont">ZLIB</span></li>
<li><span class="CodeFont">SNAPPY</span></li>
</ul>
<p class="paramDefnFirst">If you don't specify a compression format, the default is uncompressed. You cannot specify a <span class="CodeItalicFont">compression-format</span> when using the <span class="CodeFont">TEXTFILE&nbsp;</span><span class="CodeItalicFont">file-format</span>; doing so generates an error.</p>
<p class="paramName">column-definition</p>
<p class="paramDefnFirst">A column definition.</p>
<p class="paramDefn">The maximum number of columns allowed in a table is <span class="CodeFont">{{splvar_limit_MaxColumnsInTable}}</span>.</p>
<p class="paramName">column-name</p>
<p class="paramDefnFirst">The name of a column.</p>
<p class="paramName">char</p>
<p class="paramDefnFirst">A single character used as a delimiter or escape character. Enclose this character in single quotes; for example, ','.</p>
<p class="paramDefn">To specify a special character that includes the backslash character, you must escape the backslash character itself. For example:</p>
<ul class="bulletNested">
<li><span class="CodeFont">\\</span> to indicate a backslash character</li>
<li><span class="CodeFont">\n</span> to indicate a newline character</li>
<li><span class="CodeFont">\t</span> to indicate a tab character</li>
</ul>
<p class="paramName">file-format</p>
<p class="paramDefnFirst">The format of the flat file source of this external table. This is currently one of these values:</p>
<ul class="bulletNested">
<li><span class="CodeFont">ORC</span> is a columnar storage format</li>
<li><span class="CodeFont">PARQUET</span> is a columnar storage format</li>
<!-- Not Yet
<li><span class="CodeFont">Avro</span> is a data serialization system</li>
-->
<li><span class="CodeFont">TEXTFILE</span> is a plain text file</li>
</ul>
<p class="paramName">location</p>
<p class="paramDefnFirst">The location at which the file is stored.</p>
</div>
<h2>Usage Notes</h2>
<p class="body">Here are some notes about using external tables:</p>
<ul>
<li>If the data types in the table schema you specify do not match the schema of the external file, an error occurs and the table is not created.</li>
<li>You cannot define indexes or constraints on external tables</li>
<li>The <span class="CodeFont">ROW&nbsp;FORMAT</span>&nbsp;parameter is only applicable to plain text (<span class="CodeFont">TextFile</span>) not supported for columnar storage format files (<span class="CodeFont">ORC</span>&nbsp;or <span class="CodeFont">PARQUET</span>&nbsp;files)<!-- or row-based storage format files (AVRO).--></li>
<li>If you specify the location of a non-existent file when you create an external table, Splice&nbsp;Machine automatically creates an external file at that location.</li>
<!-- Not Yet
<li><span class="CodeFont">AVRO</span> external tables do not currently work with compressed files; any compression format you specify will be ignored.</li>
-->
<li>Splice Machine isn't able to know when the schema of the file represented by an external table is updated; when this occurs, you need to update the external table in Splice Machine by calling the <span class="CodeFont"><a href="sqlref_sysprocs_refreshexttable.html">SYSCS_UTIL.SYSCS_REFRESH_EXTERNAL_TABLE</a></span> built-in system procedure.</li>
<li>You cannot specify a <span class="CodeItalicFont">compression-format</span> when using the <span class="CodeFont">TEXTFILE&nbsp;</span><span class="CodeItalicFont">file-format</span>; doing so generates an error.</li>
</ul>
<h2>Examples</h2>
<p>This section presents examples of the <span class="CodeFont">CREATE&nbsp;EXTERNAL&nbsp;TABLE</span>&nbsp;statement.</p>
<p class="body">This example creates an external table for a <span class="CodeFont">PARQUET</span>&nbsp;file:</p>
<div class="preWrapperWide">
<pre class="Example" xml:space="preserve">splice&gt;&nbsp;CREATE EXTERNAL TABLE myParquetTable(<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col1 INT, col2 VARCHAR(24))<br />&nbsp;&nbsp;&nbsp;PARTITIONED BY (col1)<br />&nbsp;&nbsp;&nbsp;STORED AS PARQUET<br />&nbsp;&nbsp;&nbsp;LOCATION '/users/myName/myParquetFile';
0 rows inserted/updated/deleted</pre>
<!-- Not Yet
<p class="body">This example creates an external table for an <span class="CodeFont">AVRO</span> file:</p>
<div class="preWrapper">
<pre class="Example" xml:space="preserve">splice&gt;&nbsp;CREATE EXTERNAL TABLE myAvroTable(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col1 INT, col2 VARCHAR(24))<br />&nbsp;&nbsp;&nbsp;PARTITIONED BY (col1)<br />&nbsp;&nbsp;&nbsp;STORED AS AVRO<br />&nbsp;&nbsp;&nbsp;LOCATION '/users/myName/myAvroFile';<br />0 rows inserted/updated/deleted</pre>
</div>
-->
<p class="body">This example creates an external table for an <span class="CodeFont">ORC</span>&nbsp;file and inserts data into it:</p>
<div class="preWrapper">
<pre class="Example" xml:space="preserve">splice&gt;&nbsp;CREATE EXTERNAL TABLE myOrcTable(<br />&nbsp;&nbsp;&nbsp;col1 INT, col2 VARCHAR(24))<br />&nbsp;&nbsp;&nbsp;PARTITIONED BY (col1)<br />&nbsp;&nbsp;&nbsp;STORED AS ORC<br />&nbsp;&nbsp;&nbsp;LOCATION '/users/myName/myOrcFile';<br />0 rows inserted/updated/deleted<br /><br />splice&gt;&nbsp;INSERT&nbsp;INTO&nbsp;myOrcTable VALUES (1, 'One'), (2, 'Two'), (3, 'Three');<br />3 rows inserted/updated/deleted<br /><br />splice&gt;&nbsp;SELECT&nbsp;*&nbsp;FROM&nbsp;myOrcTable;<br />COL1        |COL2<br />------------------------------------
3           |Three
2           |Two
1           |One</pre>
</div>
<p class="body">This example creates an external table for a plain text file:</p>
<div class="preWrapper">
<pre class="Example" xml:space="preserve">splice&gt;&nbsp;CREATE EXTERNAL TABLE myTextTable(<br />&nbsp;&nbsp;&nbsp;col1 INT, col2 VARCHAR(24))<br />&nbsp;&nbsp;&nbsp;PARTITIONED BY (col1)<br />&nbsp;&nbsp;&nbsp;ROW FORMAT DELIMITED FIELDS TERMINATED BY ',' ESCAPED BY '\\'<br />&nbsp;&nbsp;&nbsp;LINES TERMINATED BY '\\n'<br />&nbsp;&nbsp;&nbsp;STORED AS TEXTFILE<br />&nbsp;&nbsp;&nbsp;LOCATION '/users/myName/myTextFile';<br />0 rows inserted/updated/deleted</pre>
</div>
<p class="body">This example creates an external table for a <span class="CodeFont">PARQUET</span>&nbsp;file that was compressed with Snappy compression:</p>
<div class="preWrapper">
<pre class="Example" xml:space="preserve">splice&gt;&nbsp;CREATE EXTERNAL TABLE mySnappyParquetTable(<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col1 INT, col2 VARCHAR(24))<br />&nbsp;&nbsp;&nbsp;COMPRESSED&nbsp;WITH&nbsp;SNAPPY<br />&nbsp;&nbsp;&nbsp;PARTITIONED BY (col1)<br />&nbsp;&nbsp;&nbsp;STORED AS PARQUET<br />&nbsp;&nbsp;&nbsp;LOCATION '/users/myName/mySnappyParquetFile';<br />
0 rows inserted/updated/deleted</pre>
</div>
</div>
<h2>See Also</h2>
<ul>
<li><span class="CodeFont"><a href="sqlref_statements_createtable.html">CREATE&nbsp;TABLE</a></span>&nbsp;statement</li>
<li><span class="CodeFont"><a href="sqlref_statements_pintable.html">PIN&nbsp;TABLE</a></span>&nbsp;statement</li>
<li><span class="CodeFont"><a href="sqlref_statements_droptable.html">DROP&nbsp;TABLE</a></span>&nbsp;statement</li>
<li><span class="CodeFont"><a href="sqlref_sysprocs_refreshexttable.html">REFRESH&nbsp;EXTERNAL&nbsp;TABLE</a></span>&nbsp;built-in system procedure</li>
<li><a href="developers_fundamentals_foreignkeys.html">Foreign Keys</a> in the <span class="ItalicFont">Developer's Guide</span>.</li>
<li><a href="developers_fundamentals_triggers.html">Triggers</a> in the <span class="ItalicFont">Developer's Guide</span>.</li>
</ul>
</div>
</section>
