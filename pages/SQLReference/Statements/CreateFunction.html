---
title: CREATE FUNCTION statement
summary: Creates Java functions that you can then use in expressions.
keywords: creating functions
toc: false
product: all
sidebar:  sqlref_sidebar
permalink: sqlref_statements_createfunction.html
folder: SQLReference/Statements
---
	<section>
		<div class="TopicContent" data-swiftype-index="true">
            <h1 id="Statements.CreateFunction">CREATE FUNCTION</h1>
            <p>The <code>CREATE FUNCTION</code> statement allows you to create Java functions, which you can then use in expressions.</p>
            <p>For details on how Splice Machine matches functions to Java methods,	see <a href="sqlref_sqlargmatching.html">Argument matching</a>.</p>
            <h2>Syntax</h2>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve">CREATE FUNCTION <em>functionName</em> (
	[ <em>functionParameter</em>
   	[, <em>functionParameter</em>] ] *
	)
    RETURNS <em>returnDataType</em> [ <em>functionElement</em> ] *</pre>
            </div>
            <div class="paramList">
                <p class="paramName">functionName</p>
                <div class="fcnWrapperWide"><pre class="FcnSyntax">[ <em><a href="sqlref_identifiers_intro.html">SQL Identifier</a></em></pre>
                </div>
                <p class="paramDefn">If <code>schemaName</code> is not provided, then the current schema is the default schema. If a qualified procedure name is specified, the schema name cannot begin with <code>SYS</code>.</p>
                <p class="paramName">functionParameter</p>
                <div class="fcnWrapperWide"><pre class="FcnSyntax">[ <em>parameterName</em> ] <em><a href="sqlref_datatypes_intro.html">DataType</a></em></pre>
                </div>
                <p class="paramDefnFirst"><code>parameterName</code> is an identifier that must be unique within the function's parameter names. </p>
                <p class="noteNote">Data-types such as <code>BLOB, CLOB, LONG VARCHAR</code> are not allowed as parameters in a <code>CREATE FUNCTION</code> statement.</p>
                <p class="paramName">returnDataType</p>
                <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve"><em><a href="sqlref_datatypes_intro.html">DataType</a></em> |
<em><a href="#TableType">TableType</a></em></pre>
                </div>
                <p class="paramName">functionElement</p>
                <p class="paramDefnFirst">See the description of <a href="#FunctionElements">Function Elements</a> in the next section.</p>
            </div>
            <h2 id="TableType">TableType</h2>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve">TABLE( <em>ColumnElement</em> [,<em>ColumnElement</em>]* )
</pre>
            </div>
            <div class="paramList">
                <p class="paramName">ColumnElement</p>
                <p class="paramDefnFirst">A <em><a href="sqlref_identifiers_intro.html">SQL Identifier</a></em>.</p>
            </div>
            <p>Table functions return <code>TableType</code> results. Currently, only Splice Machine-style table functions are supporte, which are functions that return JDBC <em>ResultSets.</em></p>
            <p>When values are extracted from a <em>ResultSet</em>, the data types of the values are coerced to match the data types declared in the <code>CREATE&#160;FUNCTION&#160;</code>statement. Here&#160;are a few coercion rules you should know about:</p>
            <ul>
                <li>values that are too long are truncated to the maximum declared length</li>
                <li>if a string value is returned in the <em>ResultSet</em> for a column of type <code>CHAR</code>, and the string is shorter than the column length, the string is padded with spaces</li>
            </ul>
            <h2 id="FunctionElements">Function Elements</h2>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve"> {
    LANGUAGE { JAVA }
  | <em>DeterministicCharacteristic</em>
  | EXTERNAL NAME <em>javaMethodName</em>
  | PARAMETER STYLE <em>parameterStyle</em>
  | <em>sqlStatementType</em>
  | <em>nullInputAction</em>
}</pre>
            </div>
            <p>The function elements may appear in any order, but each type of element can only appear once. </p>
            <p>These function elements are required:</p>
            <ul>
                <li>&#160;<em>LANGUAGE</em></li>
                <li><em>EXTERNAL&#160;NAME</em>
                </li>
                <li> <em>PARAMETER&#160;STYLE</em></li>
            </ul>
            <div class="paramList">
                <p class="paramName">LANGUAGE</p>
                <p class="paramDefnFirst">Only <code>JAVA</code>&#160;is accepted at this time. Splice Machine will call the function as a public static method in a Java class.</p>
                <p class="paramName">DeterministicCharacteristic</p>
                <div class="fcnWrapperWide"><pre class="FcnSyntax">DETERMINISTIC | NOT DETERMINISTIC</pre>
                </div>
                <p class="paramDefnFirst">The default value is <code>NOT&#160;DETERMINISTIC</code>.</p>
                <p class="paramDefn">Specifying <code>DETERMINISTIC</code>&#160;indicates that the function always returns the same result, given the same input values. This allows Splice Machine to call the function with greater efficiency; however, specifying this for a function that is actually non-deterministic will have the opposite effect -- efficiency of calls to the function will be reduced.</p>
                <p class="paramName">javaMethodName</p>
                <div class="fcnWrapperWide"><pre class="FcnSyntax">class_name.method_name</pre>
                </div>
                <p class="paramDefnFirst">This is the name of the Java method to call when this function executes. </p>
                <p class="paramName">parameterStyle</p>
                <div class="fcnWrapperWide"><pre class="FcnSyntax">JAVA | DERBY_JDBC_RESULT_SET</pre>
                </div>
                <p class="paramDefnFirst">Only use <code>DERBY_JDBC_RESULT_SET</code> if this is a Splice Machine-style table function that returns a <a href="#TableType">TableType</a> result, and is mapped to a Java method that returns a JDBC <em>ResultSet</em>. </p>
                <p class="paramDefn">Otherwise, use <code>JAVA</code>-style parameters, which means that a parameter-passing convention is used that conforms to the Java language and SQL Routines specification. <code>INOUT</code> and <code>OUT</code> parameters are passed as single entry arrays to facilitate returning values. Result sets can be returned through additional parameters to the Java method of type <code>java.sql.ResultSet[]</code> that are passed single entry arrays.</p>
                <p class="paramDefn">Splice Machine does not support long column types such as <code>LONG&#160;VARCHAR</code>or <code>BLOB</code>; an error will occur if you try to use one of these long column types. </p>
                <p class="paramName">sqlStatementType</p>
                <div class="paramListNested">
                    <p class="paramName">CONTAINS SQL</p>
                    <p class="paramDefnFirst">Indicates that SQL statements that neither read nor modify SQL data can be executed by the function. Statements that are not supported in any function return a different error.</p>
                    <p class="paramName">NO SQL</p>
                    <p class="paramDefnFirst">Indicates that the function cannot execute any SQL statements</p>
                    <p class="paramName">READS SQL DATA </p>
                    <p class="paramDefnFirst">Indicates that some SQL statements that do not modify SQL data can be included in the function. Statements that are not supported in any stored function return a different error. This is the default value.</p>
                </div>
                <p class="paramName">nullInputAction</p>
                <div class="paramListNested">
                    <p class="paramName">RETURNS NULL ON NULL INPUT</p>
                    <p class="paramDefnFirst">If any input argument is null, the function is not invoked, and the result is null.</p>
                    <p class="paramName">CALLED ON NULL INPUT</p>
                    <p class="paramDefnFirst">This is the default value.</p>
                    <p class="paramDefn">The function is invoked even if all input arguments are null, which means that the invoked function must test for null argument values.The result may be null or not null.</p>
                </div>
            </div>
            <h2>Example of declaring a scalar function</h2>
            <p>For more complete examples of using <code>CREATE&#160;FUNCTION</code>, please see the <a href="developers_fcnsandprocs_intro.html">Using Functions and Stored Procedures</a> section of our <em>Developer's Guide</em>.</p>
            <div class="preWrapper"><pre class="Example" xml:space="preserve">splice&gt;&#160;CREATE FUNCTION TO_DEGREES( RADIANS DOUBLE )
  RETURNS DOUBLE
  PARAMETER STYLE JAVA
  NO SQL LANGUAGE JAVA
  EXTERNAL NAME 'java.lang.Math.toDegrees';

0 rows inserted/updated/deleted</pre>
            </div>
            <h2>Example of declaring a table function</h2>
            <p class="body">This example reads data from a mySql database and inserts it into a Splice&#160;Machine database.</p>
            <p>We first implement a class that contains a public static method that connects to an external (foreign)&#160;database, uses a prepared statement to pull results from it, and returns those results as a JDBC&#160;<code>ResultSet</code>:</p>
            <div class="preWrapperWide"><pre class="Example">package splicemachine.example.vti;<br />import java.sql.*;<br />public class EmployeeTable<br />{<br />&#160;&#160;&#160;public static ResultSet read()<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;throws SQLException<br />&#160;&#160;&#160;&#160;{<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Connection conn DriverManager.getConnection( "jdbc:mysql://localhost/hr?user=myName&amp;password=myPswd" );<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PreparedStatement ps = conn.prepareStatement( "SELECT&#160;* FROM&#160;hrSchema.EmployeeTable"&#160;);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return ps.executeQuery();<br />&#160;&#160;&#160;&#160;}<br />}<br /></pre>
            </div>
            <p> Next we use the <code><a href="#">CREATE&#160;FUNCTION</a></code>&#160;.statement to declare a table function to read data from our external database and insert it into our Splice Machine database:</p>
            <div class="preWrapperWide"><pre class="Example">CREATE FUNCTION externalEmployees()
 &#160;&#160;RETURNS TABLE
&#160;&#160;&#160;&#160;&#160;(
&#160;&#160;&#160;&#160;  employeeId    INT,
&#160;&#160;&#160;&#160;  lastName      VARCHAR( 50 ),
&#160;&#160;&#160;&#160;  firstName     VARCHAR( 50 ),
&#160;&#160;&#160;&#160;  birthday      DATE
&#160;&#160;&#160;&#160;&#160;)
&#160;&#160;&#160;LANGUAGE JAVA
&#160;&#160;&#160;PARAMETER STYLE SPLICE_JDBC_RESULT_SET<br />&#160;&#160;&#160;READS SQL DATA<br />&#160;&#160;&#160;EXTERNAL NAME 'com.splicemachine.example.vti.readEmployees';</pre>
            </div>
            <p>Now we're ready to invoke our table function to read data from the external database and insert it into a table in our Splice&#160;Machine database.</p>
            <p>To invoke a table function, you must wrap it in a <code>TABLE</code> constructor in the <code>FROM</code> list of a query. For example, we could insert employee data from that database into a table named <code>employees</code> in our Splice Machine database:</p>
            <div class="preWrapperWide"><pre class="Example">INSERT INTO employees
  SELECT myExtTbl.*
    FROM TABLE (externalEmployees() ) myExtTbl;</pre>
            </div>
            <p class="noteNote">You <strong>MUST</strong>&#160;specify the table alias when using a virtual table; for example, <code>myExtTbl</code> in the above example.</p>
            <h2>See Also</h2>
            <ul>
                <li><a href="sqlref_statements_createprocedure.html"><code>CREATE_PROCEDURE</code></a>&#160;statement</li>
                <li><a href="sqlref_builtinfcns_currentuser.html"><code>CURRENT_USER</code></a> function</li>
                <li><a href="sqlref_datatypes_numerictypes.html">Data Types</a>
                </li>
                <li><a href="sqlref_statements_dropfunction.html"><code>DROP&#160;FUNCTION</code></a>&#160;statement</li>
                <li><a href="sqlref_identifiers_types.html#SchemaName">Schema Name</a>
                </li>
                <li><a href="sqlref_identifiers_intro.html">SQL Identifier</a>
                </li>
                <li><a href="sqlref_builtinfcns_sessionuser.html"><code>SESSION_USER</code></a> function</li>
                <li><a href="sqlref_builtinfcns_user.html"><code>USER</code></a> function</li>
            </ul>
        </div>
	</section>
