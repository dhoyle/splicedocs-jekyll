---
title: SYSCS_UTIL.BULK_IMPORT_HFILE built-in system procedure
summary: Built-in system procedure that imports data from an hfile.
keywords: 
toc: false
product: all
sidebar:  sqlref_sidebar
permalink: sqlref_sysprocs_importhfile.html
folder: SQLReference/BuiltInSysProcs
---
	<section>
		<div class="TopicContent">
            <h1><a name="kanchor110"></a>SYSCS_UTIL.BULK_IMPORT_HFILE</h1>
            <p>The <samp>SYSCS_UTIL.BULK_IMPORT_HFILE</samp> system procedure
imports data into your Splice Machine database by first generating HFiles and then importing those HFiles. </p>
            <div class="noteImportant">Our HFile data import procedure leverages HBase bulk loading, which allows it to import your data at a faster rate; however, using this procedure instead of our standard <span class="CodeFont"><a href="developers_ingestion_importing.html">SYSCS_UTIL.IMPORT_DATA</a></span>&#160;procedure means that <span class="CalloutFont">constraint checks are not performed during data importation</span>.</div>
            <p>You must use this procedure in conjunction with either:</p>
            <ul>
                <li value="1">The <span class="CodeFont"><a href="sqlref_sysprocs_splittableatpoints.html">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS</a></span>&#160;system procedure.</li>
                <li value="2">The <span class="CodeFont"><a href="sqlref_sysprocs_splittable.html">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</a></span>&#160;system procedure, which combines the functionality of those two procedures.</li>
            </ul>
            <p>See the <span class="ItalicFont">Usage Notes</span> section for more information and the <span class="ItalicFont">Example</span> section to see an example of using these procedures together.</p>
            <p class="heading2">Syntax</p>
            <div class="fcnWrapper"><pre class="FcnSyntax" xml:space="preserve">call SYSCS_UTIL.BULK_IMPORT_FILE (
		<span class="ItalicFont">schemaName</span>,
		<span class="ItalicFont">tableName</span>,
		<span class="ItalicFont">insertColumnList</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">fileName</span>,
		<span class="ItalicFont">columnDelimiter</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">characterDelimiter</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">timestampFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">dateFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">timeFormat</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">maxBadRecords</span>,
		<span class="ItalicFont">badRecordDirectory</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">oneLineRecords</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">charset</span><span class="CodeFont"> |&#160;null</span>,
		<span class="ItalicFont">bulkImportDirectory</span>,
		<span class="ItalicFont">skipSampling</span>
		);</pre>
            </div>
            <div class="noteNote">
                <p>Almost all of the parameter values that you pass to this procedure should match the parameter values that you pass to the <span class="CodeFont"><a href="sqlref_sysprocs_splittable.html">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</a></span> procedures. </p>
                <p>Also note that these parameters are also used in exactly the same was as they are in the <span class="CodeFont"><a href="sqlref_sysprocs_upsertdata.html">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</a></span>&#160;procedures.</p>
            </div>
            <div class="paramList">
                <p class="paramName">schemaName</p>
                <p class="paramDefnFirst">The name of the schema of the table in which to import the data.</p>
                <p class="paramName">tableName</p>
                <p class="paramDefnFirst">The name of the table into which to import the data.</p>
                <p class="paramName">insertColumnList</p>
                <p class="paramDefnFirst">The names, in single quotes, of the columns to import. If this is <span class="CodeFont">null</span>, all columns are imported.</p>
                <div class="notePlain">
                    <p>If you don't specify a specify an <span class="CodeFont">insertColumnList</span> and your input file contains more columns than are in the table, then the the extra columns at the end of each line in the input file <span class="BoldFont">are ignored</span>. For example, if your table contains columns <span class="CodeFont">(a, b, c)</span> and your file contains columns <span class="CodeFont">(a, b, c, d, e)</span>, then the data in your file's <span class="CodeFont">d</span> and <span class="CodeFont">e</span> columns will be ignored.</p>
                    <p>If you do specify an <span class="CodeFont">insertColumnList</span>, and the number of columns doesn't match your table, then any other columns in your table will be replaced by the default value for the table column (or <span class="CodeFont">NULL</span>&#160;if there is no default for the column).  For example, if your table contains columns <span class="CodeFont">(a, b, c)</span> and you only want to import columns <span class="CodeFont">(a, c)</span>, then the data in table's <span class="CodeFont">b</span> column will be replaced with the default value for that column.</p>
                </div>
                <p class="paramName">fileName</p>
                <p class="paramDefnFirst">The name of the data file that you are importing into your database.</p>
                <div class="noteIcon"> If you're importing data from an S3 bucket on AWS, please review our <a href="developers_ingestion_configures3.html">Configuring an S3 Bucket for Splice Machine Access</a> tutorial before proceeding.</div>
            </div>
            <div class="paramList">
                <p class="paramName">columnDelimiter</p>
                <p class="paramDefnFirst">The character used to separate columns, Specify <span class="CodeFont">null</span> if using the comma (<span class="CodeFont">,</span>)&#160;character as your delimiter. </p>
                <div>
                    <p class="paramDefn">In addition to using single characters, you can specify the following special characters as delimiters:</p>
                    <table summary="Special characters that can be used as character delimiters in imported files.">
                        <col />
                        <col />
                        <thead>
                            <tr>
                                <th>Special character</th>
                                <th>Display</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="CodeFont">\t</td>
                                <td>Tab </td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\f</td>
                                <td>Formfeed</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\b</td>
                                <td>Backspace</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\\</td>
                                <td>Backslash</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">^a (or ^A)</td>
                                <td>
                                    <p>Control-a</p>
                                    <div class="noteIndent">If you are using a script file from the <span class="CodeFont">splice&gt;</span>&#160;command line, your script can contain the actual <span class="CodeFont">Control-a</span> character as the value of this parameter.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="paramName">characterDelimiter</p>
                <p class="paramDefnFirst">Specifies which character is used to delimit strings in the imported data. You can specify <span class="CodeFont">null</span> or the empty string to use the default string delimiter, which is the double-quote (<span class="CodeFont">"</span>).</p>
                <div>
                    <p class="paramDefn">In addition to using single characters, you can specify the following special characters as delimiters:</p>
                    <table summary="Special characters that can be used as character delimiters in imported files.">
                        <col />
                        <col />
                        <thead>
                            <tr>
                                <th>Special character</th>
                                <th>Display</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="CodeFont">\t</td>
                                <td>Tab </td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\f</td>
                                <td>Formfeed</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\b</td>
                                <td>Backspace</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">\\</td>
                                <td>Backslash</td>
                            </tr>
                            <tr>
                                <td class="CodeFont">^a (or ^A)</td>
                                <td>
                                    <p>Control-a</p>
                                    <div class="noteIndent">If you are using a script file from the <span class="CodeFont">splice&gt;</span>&#160;command line, your script can contain the actual <span class="CodeFont">Control-a</span> character as the value of this parameter.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p class="paramDefnFirst">If your input contains control characters such as newline characters, make sure that those characters are embedded within delimited strings.</p>
                <div class="noteNote">To use the single quote (<span class="CodeFont">'</span>) character as your string delimiter, you need to escape that character. This means that you specify four quotes (<span class="CodeFont">''''</span>)&#160;as the value of this parameter. This is standard SQL&#160;syntax.<br /><br />	The <a class="WithinBook MCXref xref xrefWithinBook" href="#Examples" xrefformat="{para}">Example 1</a> section below contains an example that uses the single quote as the string delimiter character.</div>
                <p class="paramName">timestampFormat</p>
                <p class="paramDefnFirst">
			The format of timestamps stored in the file. You can set this to <span class="CodeFont">null</span> if there are no time columns in the file, or if the format of any timestamps in the file match the <span class="CodeFont">Java.sql.Timestamp</span> default format, which is: "<span class="ItalicFont">yyyy-MM-dd HH:mm:ss</span>". See the <a class="WithinBook MCXref xref xrefWithinBook" href="#TimestampFormats" xrefformat="{para}">About Timestamp Formats</a> section below for more information about timestamps.</p>
                <div class="noteNote">All of the timestamps in the file you are importing must use the same format.</div>
                <p class="paramName">dateFormat</p>
                <p class="paramDefnFirst">The format of datestamps stored in the file. You can set this to <span class="CodeFont">null</span> if there are no date columns in the file, or if the format of any dates in the file match pattern: "<span class="ItalicFont">yyyy-MM-dd</span>".<br /></p>
                <p class="paramName">timeFormat</p>
                <p class="paramDefnFirst">The format of time values stored in the file. You can set this to null if there are no time columns in the file, or if the format of any times in the file match pattern: "<span class="ItalicFont">HH:mm:ss</span>".</p>
                <div>
                    <p class="paramName">maxBadRecords</p>
                    <p class="paramDefnFirst">A&#160;<span class="CodeFont">BIGINT</span> value that represents the number of rejected (bad)&#160;records that are tolerated before the import fails. If this count of rejected records is reached, the import fails, and any successful record imports are rolled back.
			<ul><li value="1">If you specify <span class="CodeFont">-1</span> as the value of this parameter, all record import failures are tolerated and logged.</li><li value="2">If you specify <span class="CodeFont">0</span> as the value of this parameter, the import will fail if even one record is bad.</li></ul></p>
                    <p class="paramName">badRecordDirectory</p>
                    <p class="paramDefnFirst">The directory in which bad record information is logged. Splice Machine logs information to the <span class="CodeFont"><span class="CodeItalicFont">&lt;import_file_name&gt;</span>.bad</span> file in this directory; for example, bad records in an input file named <span class="CodeFont">foo.csv</span> would be logged to a file named <span class="ItalicFont">badRecordDirectory</span><span class="CodeFont">/foo.csv.bad</span>.</p>
                    <p class="paramDefn">The default value is the directory in which the import files are found.</p>
                    <p class="paramName">oneLineRecords</p>
                    <p class="paramDefnFirst">A&#160;Boolean value that specifies whether each line in the import file contains one complete record:</p>
                    <ul class="nested">
                        <li value="1">If you specify <span class="CodeFont">true</span> or <span class="CodeFont">null</span>, then each record is expected to be found on a single line in the file.</li>
                        <li value="2">If you specify <span class="CodeFont">false</span>, records can span multiple lines in the file.</li>
                    </ul>
                    <div class="noteNote">Multi-line record files are slower to load, because the file cannot be split and processed in parallel; if you import a directory of multiple line files, each file as a whole is processed in parallel, but no splitting takes place.</div>
                    <p class="paramName">charset</p>
                    <p class="paramDefnFirst">The character encoding of the import file. The default value is UTF-8. Currently, any other value is ignored and UTF-8 is used. 
 </p>
                    <p class="paramName">bulkImportDirectory</p>
                    <p class="paramDefnFirst">The directory into which the generated HFiles are written prior to being imported into your database. Note that the generated files are automatically removed after they've been imported.</p>
                    <p class="paramName">skipSampling</p>
                    <p class="paramDefnFirst">This feature is not yet implemented.</p>
                </div>
            </div>
            <p class="heading2">Results</p>
            <p><samp>SYSCS_UTIL.COMPUTE_SPLIT_KEY</samp> generates a keys file, which you use in conjunction with the <span class="CodeFont"><a href="sqlref_sysprocs_splittableatpoints.html">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS</a></span> system procedure to split your table, prior to calling the <span class="CodeFont"><a href="#">SYSCS_UTIL.BULK_IMPORT_HFILE</a></span>&#160;system procedure to import your data.</p>
            <p class="heading2"><a name="TimestampFormats"></a>About Timestamp Formats</p>
            <div>
                <p>Splice Machine uses the following Java date and time pattern letters to construct timestamps:</p>
                <table summary="Timestamp format pattern letter descriptions">
                    <col />
                    <col />
                    <col style="width: 330px;" />
                    <thead>
                        <tr>
                            <th>Pattern Letter</th>
                            <th>Description</th>
                            <th>Format(s)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="CodeFont">y</td>
                            <td>year</td>
                            <td class="CodeFont">yy or yyyy</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">M</td>
                            <td>month</td>
                            <td class="CodeFont">MM</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">d</td>
                            <td>day in month</td>
                            <td class="CodeFont">dd</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">h</td>
                            <td>hour (0-12)</td>
                            <td class="CodeFont">hh</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">H</td>
                            <td>hour (0-23)</td>
                            <td class="CodeFont">HH</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">m</td>
                            <td>minute in hour</td>
                            <td class="CodeFont">mm</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">s</td>
                            <td>seconds</td>
                            <td class="CodeFont">ss</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">S</td>
                            <td>tenths of seconds</td>
                            <td class="CodeFont">
                                <p>S, SS, SSS, SSSS, SSSSS or SSSSSS<span class="important">*</span></p>
                                <p><span class="important">*</span><span class="bodyFont">Specify </span>SSSSSS <span class="bodyFont">to allow a variable number (any number)&#160;of digits after the decimal point.</span></p>
                            </td>
                        </tr>
                        <tr>
                            <td class="CodeFont">z</td>
                            <td>time zone text</td>
                            <td class="CodeFont">e.g. Pacific Standard time</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">Z</td>
                            <td>time zone, time offset</td>
                            <td class="CodeFont">e.g. -0800</td>
                        </tr>
                    </tbody>
                </table>
                <p>The default timestamp format for Splice Machine imports is: <span class="CodeFont">yyyy-MM-dd HH:mm:ss</span>, which uses a 24-hour clock, does not allow for decimal digits of seconds, and does not allow for time zone specification. </p>
                <p class="noteNote">The standard Java library does not support microsecond precision, so you <span class="BoldFont">cannot</span> specify millisecond (<span class="CodeFont">S</span>) values in a custom timestamp format and import such values with the desired precision. </p>
                <h3>Timestamps and Importing Data at Different Locations</h3>
                <p>Note that timestamp values are relative to the geographic location at which they are imported, or more specifically, relative to the timezone setting and daylight saving time status where the data is imported.</p>
                <p>This means that timestamp values from the same data file may appear differently after being imported in different timezones.</p>
                <h3>Examples</h3>
                <p>The following tables shows valid examples of timestamps and their corresponding format (parsing)&#160;patterns:</p>
                <table>
                    <col />
                    <col />
                    <col />
                    <thead>
                        <tr>
                            <th>Timestamp value</th>
                            <th>Format Pattern</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="CodeFont">2013-03-23 09:45:00</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss</td>
                            <td>This is the default pattern.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 19:45:00.98-05</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSZ</td>
                            <td>This pattern allows up to 2 decimal digits of seconds, and requires a time zone specification.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 09:45:00-07</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ssZ</td>
                            <td>This patterns requires a time zone specification, but does not allow for decimal digits of seconds.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 19:45:00.98-0530</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSZ</td>
                            <td>This pattern allows up to 2 decimal digits of seconds, and requires a time zone specification.</td>
                        </tr>
                        <tr>
                            <td class="CodeFont">
                                <p>2013-03-23 19:45:00.123</p>
                                <p>2013-03-23 19:45:00.12</p>
                            </td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSS</td>
                            <td>
                                <p>This pattern allows up to 3 decimal digits of seconds, but does not allow a time zone specification.</p>
                                <p>Note that if your data specifies more than 3 decimal digits of seconds, an error occurs.</p>
                            </td>
                        </tr>
                        <tr>
                            <td class="CodeFont">2013-03-23 19:45:00.1298</td>
                            <td class="CodeFont">yyyy-MM-dd HH:mm:ss.SSSS</td>
                            <td>This pattern allows up to 4 decimal digits of seconds, but does not allow a time zone specification.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>Please see <span class="ItalicFont"><a href="developers_fundamentals_dates.html">Working With Date and Time Values</a></span> in the <span class="ItalicFont">Developer's Guide</span> for information working with timestamps, dates, and times.</p>
            <p class="heading2"><a name="Usage"></a>Usage Notes</p>
            <p class="body">As mentioned earlier, you need to use these three Splice&#160;Machine system procedures together:</p>
            <ul>
                <li value="1"><samp>SYSCS_UTIL.COMPUTE_SPLIT_KEY</samp> generates a keys file</li>
                <li value="2"><span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS</span> sets up the splits in Splice&#160;Machine</li>
                <li value="3"><span class="CodeFont">SYSCS_UTIL.BULK_IMPORT_HFILE</span>&#160;splits your input file into HFiles, imports your data, and then removes the HFiles</li>
            </ul>
            <p>Alternatively, you can use  <span class="CodeFont"><a href="sqlref_sysprocs_splittable.html">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</a></span> with <span class="CodeFont">SYSCS_UTIL.BULK_IMPORT_HFILE</span>. The <span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</span> system procedure combines the functionality of <span class="CodeFont">SYSCS_UTIL.COMPUTE_SPLIT_KEY</span> and <span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS</span>.</p>
            <p>The process is as follows (and is shown in more detail in <span class="ItalicFont">Example 1</span> and <span class="ItalicFont">Example 2</span> below):</p>
            <div class="opsStepsList">
                <ol>
                    <li value="1">
                        <p>Determine primary key values that can horizontally split the table into roughly equal sized partitions. </p>
                        <div class="noteNote">
                            <p>Note the value of your <span class="CodeFont">hbase.hregion.max.filesize</span> setting; each partition should ideally be about 1/2 of that value, so that the region can grow after data is loaded. </p>
                            <p>The sizes must be less than the <span class="CodeFont">hbase.hregion.max.filesize value</span>.</p>
                        </div>
                    </li>
                    <li value="2">Store those keys in a CSV&#160;file.</li>
                    <li value="3"> If you're using the combination of <span class="CodeFont"><a href="sqlref_sysprocs_splittable.html">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</a></span>&#160;procedure to compute the split row keys and split your table inside the database.</li></ol></li>
                    <li value="4">Repeat steps 1, 2, and 3 to split the indexes on your table.</li>
                    <li value="5">Call the <span class="CodeFont"><a href="#">SYSCS_UTIL.BULK_IMPORT_HFILE</a></span>&#160;procedure to split the input data file into HFiles and import the HFiles into your Splice Machine database. The HFiles are deleted after being imported.</li>
                </ol>
            </div>
            <p class="heading2"><a name="Examples"></a>Example 1</p>
            <p>The example in this section details the steps used to import data in HFile format using the Splice Machine <samp>SYSCS_UTIL.COMPUTE_SPLIT_KEY</samp>,  <span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS</span>, and <span class="CodeFont">SYSCS_UTIL.BULK_IMPORT_HFILE</span> system procedures.</p>
            <p>Follow these steps :</p>
            <div class="opsStepsList">
                <ol class="boldFont">
                    <li value="1">
                        <p class="topLevel">Create table and index:</p>
                        <div class="preWrapperWide"><pre class="Example">CREATE TABLE LINEITEM (
		 L_ORDERKEY BIGINT NOT NULL,
		 L_PARTKEY INTEGER NOT NULL,
		 L_SUPPKEY INTEGER NOT NULL, 
		 L_LINENUMBER INTEGER NOT NULL, 
		 L_QUANTITY DECIMAL(15,2),
		 L_EXTENDEDPRICE DECIMAL(15,2),
		 L_DISCOUNT DECIMAL(15,2),
		 L_TAX DECIMAL(15,2),
		 L_RETURNFLAG VARCHAR(1), 
		 L_LINESTATUS VARCHAR(1),
		 L_SHIPDATE DATE,
		 L_COMMITDATE DATE,
		 L_RECEIPTDATE DATE,
		 L_SHIPINSTRUCT VARCHAR(25),
		 L_SHIPMODE VARCHAR(10),
		 L_COMMENT VARCHAR(44),
		 PRIMARY KEY(L_ORDERKEY,L_LINENUMBER)
		 );

CREATE&#160;INDEX&#160;L_SHIPDATE_IDX on LINEITEM(
		 L_SHIPDATE,
		 L_PARTKEY,
		 L_EXTENDEDPRICE,
		 L_DISCOUNT
		 );</pre>
                        </div>
                    </li>
                    <li value="2">
                        <p class="topLevel">Compute the split row keys for the table:</p>
                        <ol class="LowerAlphaPlainFont">
                            <li value="1">
                                <p>Find primary key values that can horizontally split the table into roughly equal sized partitions.</p>
                                <p>For this example, we provide 3 keys in a file named <span class="CodeFont">lineitemKey.csv</span>. Note that each of our three keys includes a second column that is <span class="CodeFont">null</span>:</p>
                                <div class="preWrapperWide"><pre class="Example">1500000|<br />3000000|<br />4500000|</pre>
                                </div>
                            </li>
                            <li value="2">
                                <p>Specify the column names in the csv file in the <span class="CodeFont">columnList</span> parameter; in our example, the primary key columns are:</p>
                                <div class="preWrapperWide"><pre class="Example">'L_ORDERKEY,L_LINENUMBER'</pre>
                                </div>
                            </li>
                            <li value="3">
                                <p>Invoke <span class="CodeFont">SYSCS_UTIL.COMPUTE_SPLIT_KEY</span> to compute hbase split row keys and write them to a file:</p><pre class="Example">call SYSCS_UTIL.COMPUTE_SPLIT_KEY('TPCH', 'LINEITEM',null, 'L_ORDERKEY,L_LINENUMBER', '/Users/myName/test/lineitemKey.csv', '|', null, null, null, null, -1, '/BAD', true, null, '/Users/myName/test/');</pre>
                            </li>
                        </ol>
                    </li>
                    <li value="3">
                        <p class="topLevel">Set up the table splits in your database:</p>
                        <ol class="LowerAlphaPlainFont">
                            <li value="1">
                                <p>Use <span class="CodeFont">SHOW&#160;TABLES</span>&#160;to discover the conglomerate ID&#160;for the <span class="CodeFont">TPCH.LINEITEM</span>&#160;table, which for this example is <span class="CodeFont">1536</span>. This means that the split keys file for this table is in the <span class="CodeFont">Users/myData/test/1536</span> directory. You'll see values like these:</p>
                                <div class="preWrapperWide"><pre class="Example">\xE4\x16\xE3`<br />\xE4-\xC6\xC0<br />\xE4D\xAA</pre>
                                </div>
                            </li>
                            <li value="2">
                                <p>Now use those values in a call to our system procedure to split the table inside the database:</p>
                                <div class="preWrapperWide"><pre class="Example">call SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS('TPCH','LINEITEM',null,'\xE4\x16\xE3`,\xE4-\xC6\xC0,\xE4D\xAA');</pre>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li value="4">
                        <p class="topLevel">Compute the split keys for your index:</p>
                        <ol class="LowerAlphaPlainFont">
                            <li value="1">Find index values that can horizontally split the table into roughly equal sized partitions.</li>
                            <li value="2">
                                <p>For this example, we provide 2 index values in a file named <span class="CodeFont">shipDateIndex.csv</span>. Note that each of our keys includes <span class="CodeFont">null</span> column values:</p>
                                <div class="preWrapperWide"><pre class="Example">1994-01-01|||
1996-01-01|||</pre>
                                </div>
                            </li>
                            <li value="3">
                                <p>Specify the column names in the csv file in the <span class="CodeFont">columnList</span> parameter; in our example, the index columns are:</p>
                                <div class="preWrapperWide"><pre class="Example">'L_SHIPDATE,L_PARTKEY,L_EXTENDEDPRICE,L_DISCOUNT'</pre>
                                </div>
                            </li>
                            <li value="4">
                                <p>Invoke <span class="CodeFont">SYSCS_UTIL.COMPUTE_SPLIT_KEY</span> to compute hbase split row keys and write them to a file:</p><pre class="Example">call SYSCS_UTIL.COMPUTE_SPLIT_KEY('TPCH', 'LINEITEM', 'L_SHIPDATE_IDX', 'L_SHIPDATE,L_PARTKEY,L_EXTENDEDPRICE,L_DISCOUNT', '/Users/myName/test/shipDateIndex.csv', '|', null, null, null, null, -1, '/BAD', true, null, '/Users/myName/test/');
</pre>
                            </li>
                        </ol>
                    </li>
                    <li value="5">
                        <p class="topLevel">Set up the indexes in your database:</p>
                        <ol class="LowerAlphaPlainFont">
                            <li value="1">
                                <p>Copy the row key values from the output file:</p>
                                <div class="preWrapperWide"><pre class="Example">\xEC\xB0Y9\xBC\x00\x00\x00\x00\x00\x80
\xEC\xBF\x08\x9C\x14\x00\x00\x00\x00\x00\x80</pre>
                                </div>
                            </li>
                            <li value="2">
                                <p>Now call our system procedure to split the index:</p>
                                <div class="preWrapperWide"><pre class="Example">call SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS('TPCH','LINEITEM','L_SHIPDATE_IDX','\xEC\xB0Y9\xBC\x00\x00\x00\x00\x00\x80,\xEC\xBF\x08\x9C\x14\x00\x00\x00\x00\x00\x80');
</pre>
                                </div>
                            </li>
                        </ol>
                    </li>
                    <li value="6">
                        <p class="topLevel">Import the HFiles Into Your Database</p>
                        <p class="indentLevel1">Once you have split your table and indexes, call this procedure to generate and import the HFiles into your Splice Machine database:</p>
                        <div class="preWrapperWide"><pre class="Example">call SYSCS_UTIL.BULK_IMPORT_HFILE('TPCH', 'LINEITEM', null, '/TPCH/1/lineitem', '|', null, null, null, null, -1, '/BAD', true, null, '/Users/myName/test/', false);</pre>
                        </div>
                        <p class="indentLevel1">The generated HFiles are automatically deleted after being imported.</p>
                    </li>
                </ol>
            </div>
            <p class="heading2">Example 2</p>
            <p>The example in this section details the steps used to import data in HFile format using the Splice Machine  <span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</span>, and <span class="CodeFont">SYSCS_UTIL.BULK_IMPORT_HFILE</span> system procedures.</p>
            <p>Follow these steps :</p>
            <div class="opsStepsList">
                <ol class="boldFont">
                    <li value="1">
                        <p class="topLevel">Create table and index:</p>
                        <div class="preWrapperWide"><pre class="Example">CREATE TABLE LINEITEM (
		 L_ORDERKEY BIGINT NOT NULL,
		 L_PARTKEY INTEGER NOT NULL,
		 L_SUPPKEY INTEGER NOT NULL, 
		 L_LINENUMBER INTEGER NOT NULL, 
		 L_QUANTITY DECIMAL(15,2),
		 L_EXTENDEDPRICE DECIMAL(15,2),
		 L_DISCOUNT DECIMAL(15,2),
		 L_TAX DECIMAL(15,2),
		 L_RETURNFLAG VARCHAR(1), 
		 L_LINESTATUS VARCHAR(1),
		 L_SHIPDATE DATE,
		 L_COMMITDATE DATE,
		 L_RECEIPTDATE DATE,
		 L_SHIPINSTRUCT VARCHAR(25),
		 L_SHIPMODE VARCHAR(10),
		 L_COMMENT VARCHAR(44),
		 PRIMARY KEY(L_ORDERKEY,L_LINENUMBER)
		 );

CREATE&#160;INDEX&#160;L_SHIPDATE_IDX on LINEITEM(
		 L_SHIPDATE,
		 L_PARTKEY,
		 L_EXTENDEDPRICE,
		 L_DISCOUNT
		 );</pre>
                        </div>
                    </li>
                    <li value="2">
                        <p class="topLevel">Compute the split row keys for your table and set up the split in your database:</p>
                        <ol class="LowerAlphaPlainFont">
                            <li value="1">
                                <p>Find primary key values that can horizontally split the table into roughly equal sized partitions.</p>
                                <p>For this example, we provide 3 keys in a file named <span class="CodeFont">lineitemKey.csv</span>. Note that each of our three keys includes a second column that is <span class="CodeFont">null</span>:</p>
                                <div class="preWrapperWide"><pre class="Example">1500000|<br />3000000|<br />4500000|</pre>
                                </div>
                            </li>
                            <li value="2">
                                <p>Specify the column names in the csv file in the <span class="CodeFont">columnList</span> parameter; in our example, the primary key columns are:</p>
                                <div class="preWrapperWide"><pre class="Example">'L_ORDERKEY,L_LINENUMBER'</pre>
                                </div>
                            </li>
                            <li value="3">
                                <p>Invoke <span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</span> to compute hbase split row keys and set up the splits</p><pre class="Example">call SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX('TPCH', 'LINEITEM',null, 'L_ORDERKEY,L_LINENUMBER', '/Users/myName/test/lineitemKey.csv', '|', null, null, null, null, -1, '/BAD', true, null);</pre>
                            </li>
                        </ol>
                    </li>
                    <li value="3">
                        <p class="topLevel">Compute the split keys for your index:</p>
                        <ol class="LowerAlphaPlainFont">
                            <li value="1">Find index values that can horizontally split the table into roughly equal sized partitions.</li>
                            <li value="2">
                                <p>For this example, we provide 2 index values in a file named <span class="CodeFont">shipDateIndex.csv</span>. Note that each of our keys includes <span class="CodeFont">null</span> column values:</p>
                                <div class="preWrapperWide"><pre class="Example">1994-01-01|||
1996-01-01|||</pre>
                                </div>
                            </li>
                            <li value="3">
                                <p>Specify the column names in the csv file in the <span class="CodeFont">columnList</span> parameter; in our example, the index columns are:</p>
                                <div class="preWrapperWide"><pre class="Example">'L_SHIPDATE,L_PARTKEY,L_EXTENDEDPRICE,L_DISCOUNT'</pre>
                                </div>
                            </li>
                            <li value="4">
                                <p>Invoke <span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</span> to compute hbase split row keys and set up the index splits</p><pre class="Example">call SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX('TPCH', 'LINEITEM', 'L_SHIPDATE_IDX', 'L_SHIPDATE,L_PARTKEY,L_EXTENDEDPRICE,L_DISCOUNT', '/Users/myName/test/shipDateIndex.csv', '|', null, null, null, null, -1, '/BAD', true, null);
</pre>
                            </li>
                        </ol>
                    </li>
                    <li value="4">
                        <p class="topLevel">Import the HFiles Into Your Database</p>
                        <p class="indentLevel1">Once you have split your table and indexes, call this procedure to generate and import the HFiles into your Splice Machine database:</p>
                        <div class="preWrapperWide"><pre class="Example">call SYSCS_UTIL.BULK_IMPORT_HFILE('TPCH', 'LINEITEM', null, '/TPCH/1/lineitem', '|', null, null, null, null, -1, '/BAD', true, null, '/Users/myName/test/', false);</pre>
                        </div>
                        <p class="indentLevel1">The generated HFiles are automatically deleted after being imported.</p>
                    </li>
                </ol>
            </div>
            <p class="heading2">See Also</p>
            <ul>
                <li value="1"><a href="sqlref_sysprocs_computesplitkey.html"><span class="CodeFont">SYSCS_UTIL.COMPUTE_SPLIT_KEY</span></a>
                </li>
                <li value="2"><a href="sqlref_sysprocs_splittable.html"><span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX</span></a>
                </li>
                <li value="3"><a href="sqlref_sysprocs_splittableatpoints.html"><span class="CodeFont">SYSCS_UTIL.SYSCS_SPLIT_TABLE_OR_INDEX_AT_POINTS</span></a>
                </li>
            </ul>
            <p style="font-size: 6pt;margin-top: 0;margin-bottom: 0;">&#160;</p>
        </div>
	</section>
