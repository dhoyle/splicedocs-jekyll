---
title: CONSTRAINT clause
summary: An optional clause in CREATE TABLE and ALTER TABLE statements that specifies a rule to which the data must conform.
keywords: constraints, column-level constraints, primary key, foreign key, unique
toc: false
product: all
sidebar:  sqlref_sidebar
permalink: sqlref_clauses_constraint.html
folder: SQLReference/Clauses
---
	<section>
		<div class="TopicContent" data-swiftype-index="true">
            <h1 id="Clauses.Constraint">CONSTRAINT</h1>
            <p>A <code>CONSTRAINT</code> clause is a rule to which data must conform, and is an optional part of <a href="sqlref_clauses_constraint.html"><code>ALTER TABLE</code></a> statements. Constraints can optionally be named.</p>
            <p>There are two types of constraints:</p>
            <div class="paramList">
                <p class="paramName">column-level constraints</p>
                <p class="paramDefnFirst">A column-level constraint refers to a single column in a table (the column that it follows syntactically)&#160;in the table. Column constraints, other than <code>CHECK </code>constraints, do not specify a column name.</p>
                <p class="paramName">table-level constraints</p>
                <p class="paramDefnFirst">A&#160;table-level constraints refers to one or more columns in a table by specifying the names of those columns. Table-level <code>CHECK</code> constraints can refer to 0 or more columns in the table.</p>
            </div>
            <p>Column constraints and table constraints have the same function; the difference is in where you specify them.</p>
            <ul>
                <li>Table constraints allow you to specify more than one column in a <code>PRIMARY KEY </code> or <code>CHECK&#160;</code><span>, <code>UNIQUE</code> or <code>FOREIGN KEY</code></span> constraint definition.</li>
                <li>Column-level constraints (except for check constraints) refer to only one column.</li>
            </ul>
            <h2 id="ColumnConstraint">Column Constraints</h2>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve">{
NOT NULL |
[ [CONSTRAINT constraint-Name]
{PRIMARY KEY}
}</pre>
            </div>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve">{
NOT NULL |
[ [CONSTRAINT constraint-Name]
{
CHECK (searchCondition) |
{
PRIMARY KEY |
UNIQUE |
REFERENCES clause
}
}
}</pre>
            </div>
            <div class="paramList">
                <p class="paramName">NOT&#160;NULL</p>
                <p class="paramDefnFirst">Specifies that this column cannot hold <code>NULL</code> values (constraints of this type are not nameable).</p>
                <p class="paramName">PRIMARY KEY</p>
                <p class="paramDefnFirst">Specifies the column that uniquely identifies a row in the table. The identified columns must be defined as <code>NOT NULL</code>.</p>
                <p class="noteNote">At this time, you <strong>cannot</strong> add a primary key using <code>ALTER TABLE</code>. </p>
                <p class="noteNote">If you attempt to add a primary key using <code>ALTER TABLE</code> and any of the columns included in the primary key contain null values, an error will be generated and the primary key will not be added. See <a href="sqlref_statements_altertable.html"><code>ALTER TABLE</code> statement</a> for more information.</p>
                <p class="paramName">UNIQUE</p>
                <p class="paramDefnFirst">Specifies that values in the column must be unique.</p>
                <p class="paramName">FOREIGN KEY</p>
                <p class="paramDefnFirst">Specifies that the values in the column must correspond to values in a referenced primary key or unique key column or that they are NULL.</p>
                <p class="paramName">CHECK</p>
                <p class="paramDefnFirst">Specifies rules for values in the column.</p>
            </div>
            <h2 id="TableConstraint">Table Constraints</h2>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve">[CONSTRAINT <em>constraint-Name</em>]
{
&#160;&#160;&#160;PRIMARY KEY ( <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em>
&#160;&#160;&#160;[ , <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em> ]* )
}</pre>
            </div>
            <div class="fcnWrapperWide"><pre class="FcnSyntax" xml:space="preserve">[CONSTRAINT <em>constraint-Name</em>]
{
&#160;&#160;&#160;CHECK (<em>searchCondition</em>) |
&#160;&#160;&#160;{
&#160;&#160;&#160;PRIMARY KEY ( <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em>
&#160;&#160;&#160;[ , <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em> ]* ) |
&#160;&#160;&#160;UNIQUE ( <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em>
&#160;&#160;&#160;[ , <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em> ]* ) |
&#160;&#160;&#160;FOREIGN KEY (
&#160;&#160;&#160;<em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em>
&#160;&#160;&#160;[ , <em><a href="sqlref_identifiers_types.html#SimpleColumnName">Simple-column-Name</a></em> ]* )
&#160;&#160;&#160;<em>REFERENCES clause</em>
&#160;&#160;&#160;}
}</pre>
            </div>
            <div class="paramList">
                <p class="paramName">PRIMARY KEY</p>
                <p class="paramDefnFirst">Specifies the column or columns that uniquely identify a row in the table. <code>NULL</code> values are not allowed.</p>
                <p class="noteNote">At this time, you <strong>cannot</strong> add a primary key using <code>ALTER TABLE</code>.</p>
                <p class="paramName">UNIQUE</p>
                <p class="paramDefnFirst">Specifies that values in the columns must be unique.</p>
                <p class="paramName">FOREIGN KEY</p>
                <p class="paramDefnFirst">Specifies that the values in the columns must correspond to values in referenced primary key or unique columns or that they are <code>NULL</code>.</p>
                <p class="noteNote">If the foreign key consists of multiple columns, and <em>any</em> column is <code>NULL</code>, the whole key is considered <code>NULL</code>. The insert is permitted no matter what is on the non-null columns.</p>
                <p class="paramName">CHECK</p>
                <p class="paramDefnFirst">Specifies a wide range of rules for values in the table.</p>
            </div>
            <h2>Primary Key Constraints</h2>
            <p class="noteNote">At this time, you <strong>cannot</strong> alter primary keys using <code>ALTER TABLE</code>.</p>
            <p>Primary keys are constrained as follows:</p>
            <ul>
                <li>A primary key defines the set of columns that uniquely identifies rows in a table.</li>
                <li>When you create a primary key constraint, none of the columns included in the primary key can have <code>NULL</code> constraints; that is, they must not permit <code>NULL</code> values.</li>
                <li>A table can have at most one <code>PRIMARY KEY</code> constraint.</li>
            </ul>
            <h2>Unique constraints</h2>
            <p>A <code>UNIQUE</code> constraint defines a set of columns that uniquely identify rows in a table only if all the key values are not <code>NULL</code>. If one or more key parts are <code>NULL</code>, duplicate keys are allowed. </p>
            <p>For example, if there is a <code>UNIQUE</code> constraint on <code>col1</code> and <code>col2</code> of a table, the combination of the values held by <code>col1</code> and <code>col2</code> will be unique as long as these values are not <code>NULL</code>. If one of <code>col1</code> and <code>col2</code> holds a <code>NULL</code> value, there can be another identical row in the table.</p>
            <p>A table can have multiple <code>UNIQUE</code> constraints.</p>
            <h2>Foreign key constraints</h2>
            <p>Foreign keys providea way to enforce the referential integrity of a database. A foreign key is a column or group of columns within a table that references a key in some other table (or sometimes the same table). The foreign key must always include the columns of which the types exactly match those in the referenced primary key or unique constraint.</p>
            <p>For a table-level foreign key constraint in which you specify the columns in the table that make up the constraint, you cannot use the same column more than once.</p>
            <p>If there is a column list in the <em>ReferencesSpecification </em>(a list of columns in the referenced table), it must correspond either to a unique constraint or to a primary key constraint in the referenced table. The <em>ReferencesSpecification</em> can omit the column list for the referenced table if that table has a declared primary key.</p>
            <p>If there is no column list in the <em>ReferencesSpecification </em>and the referenced table has no primary key, a statement exception is thrown. (This means that if the referenced table has only unique keys, you must include a column list in the <em>ReferencesSpecification.</em>)</p>
            <p>A foreign key constraint is satisfied if there is a matching value in the referenced unique or primary key column. If the foreign key consists of multiple columns, the foreign key value is considered <code>NULL</code> if any of its columns contains a <code>NULL</code>.</p>
            <p>It is possible for a foreign key consisting of multiple columns to allow one of the columns to contain a value for which there is no matching value in the referenced columns, per the ANSI&#160;SQL standard. To avoid this situation, create <code>NOT NULL</code> constraints on all of the foreign key's columns.</p>
            <h3>Foreign key constraints and DML</h3>
            <p>When you insert
	into or update a table with an enabled foreign key constraint, Splice Machine checks that the row does not violate the foreign key constraint by looking up the corresponding referenced key in the referenced table. If the constraint is not satisfied, Splice Machine rejects the insert or update with a statement exception.</p>
            <p>When you update or delete a row in a table with a referenced key (a primary or unique constraint referenced by a foreign key), Splice Machine checks every foreign key constraint that references the key to make sure that the removal or modification of the row does not cause a constraint violation.</p>
            <p>If removal or modification of the row would cause a constraint violation,
	the update or delete is not permitted and Splice Machine throws a statement exception.</p>
            <p>Splice Machine performs constraint checks at the time the statement is executed, not when the transaction commits.</p>
            <p><code>PRIMARY KEY</code> constraints generate unique indexes. <code>FOREIGN KEY</code> constraints generate non-unique indexes.</p>
            <p><code>UNIQUE</code> constraints generate unique indexes if all the columns are non-nullable, and they generate non-unique indexes if one or more columns are nullable.</p>
            <p>Therefore, if a column or set of columns has a <code>UNIQUE</code>, <code>PRIMARY KEY</code>, or <code>FOREIGN KEY</code> constraint on it, you do not need to create an index on those columns for performance. Splice Machine has already created it for you.</p>
            <h2>Check constraints</h2>
            <p>You can use check constraints to limit which values are accepted by one or more columns in a table. You specify the constraint with a Boolean expression; if the expression evaluates to <code>true</code>, the value is allowed; if the expression evaluates to <code>false</code>, the constraint prevents the value from being entered into the database.The search condition is applied to each row that is modified on an <code>INSERT</code> or <code>UPDATE</code> at the time of the row modification.  When a constraint is violated, the entire statement is aborted. You can apply check constraints at the column level or table level. </p>
            <p>For example, you could specify that values in the salary column for the players on your team must be between $250,000 and $30,000,000 with this expression:</p>
            <div class="preWrapper"><pre class="Example">salary &gt;= 250000 AND salary &lt;= 30000000.</pre>
            </div>
            <p>Any attempt to insert or update a record with a salary value out of that range would fail.</p>
            <h2 id="SearchCondition">Search Condition</h2>
            <p>A <em>searchCondition</em> is any <a href="sqlref_expressions_boolean.html">Boolean expression</a> that
	meets the requirements specified below. If a <em>constraint-Name</em> is not specified, Splice Machine generates
	a unique constraint name (for either column or table constraints).</p>
            <h3>Requirements for search condition</h3>
            <p>If a check constraint is specified as part of a column-definition, a column reference can only be made to the same column. Check constraints specified as part of a table definition can have column references identifying columns previously defined in the <code><a href="sqlref_statements_createtable.html">CREATE TABLE</a></code> statement.</p>
            <p> The search condition must always return the same value if applied to the same values. Thus, it cannot contain any of the following:</p>
            <ul>
                <li>Dynamic parameters</li>
                <li>Date/Time Functions (<code><a href="sqlref_builtinfcns_currenttimestamp.html">CURRENT_TIMESTAMP</a></code>)</li>
                <li>Subqueries</li>
                <li>User Functions (such as <code><a href="sqlref_builtinfcns_currentuser.html">CURRENT_USER</a></code>)</li>
            </ul>
            <h2>Examples</h2>
            <div class="preWrapperWide"><pre class="Example" xml:space="preserve">   -- column-level primary key constraint named OUT_TRAY_PK:
CREATE TABLE SAMP.OUT_TRAY
(
SENT TIMESTAMP,
DESTINATION CHAR(8),
SUBJECT CHAR(64) NOT NULL CONSTRAINT
OUT_TRAY_PK PRIMARY KEY,
NOTE_TEXT VARCHAR(3000)
);

-- the table-level primary key definition allows you to
-- include two columns in the primary key definition:
CREATE TABLE SAMP.SCHED
(
CLASS_CODE CHAR(7) NOT NULL,
DAY SMALLINT NOT NULL,
STARTING TIME,
ENDING TIME,
PRIMARY KEY (CLASS_CODE, DAY)
);
-- Use a column-level constraint for an arithmetic check
-- Use a table-level constraint
-- to make sure that a employee's taxes does not
-- exceed the bonus
CREATE TABLE SAMP.EMP
(
EMPNO CHAR(6) NOT NULL CONSTRAINT EMP_PK PRIMARY KEY,
FIRSTNME CHAR(12) NOT NULL,
MIDINIT vARCHAR(12) NOT NULL,
LASTNAME VARCHAR(15) NOT NULL,
SALARY DECIMAL(9,2) CONSTRAINT SAL_CK CHECK (SALARY &gt;= 10000),
BONUS DECIMAL(9,2),
TAX DECIMAL(9,2),
CONSTRAINT BONUS_CK CHECK (BONUS &gt; TAX)
);

-- use a check constraint to allow only appropriate
-- abbreviations for the meals
CREATE TABLE FLIGHTS
(
FLIGHT_ID CHAR(6) NOT NULL ,
SEGMENT_NUMBER INTEGER NOT NULL ,
ORIG_AIRPORT CHAR(3),
DEPART_TIME TIME,
DEST_AIRPORT CHAR(3),
ARRIVE_TIME TIME,
MEAL CHAR(1) CONSTRAINT MEAL_CONSTRAINT
CHECK (MEAL IN ('B', 'L', 'D', 'S')),
PRIMARY KEY (FLIGHT_ID, SEGMENT_NUMBER)
);</pre>
            </div>
            <h2>Statement dependency system</h2>
            <p><code><a href="sqlref_statements_insert.html">INSERT</a></code>
	and <code><a href="sqlref_statements_update.html">UPDATE</a></code> statements depend on all constraints on the target table.</p>
            <p><code><a href="sqlref_statements_delete.html">DELETE</a></code> statements
	depend on unique<span>, primary key, and foreign key constraints</span>. </p>
            <p>These statements
	are invalidated if a constraint is added to or dropped from the target table.</p>
            <h2>See Also</h2>
            <ul>
                <li><a href="sqlref_statements_altertable.html"><code>ALTER&#160;TABLE</code></a>&#160;statement</li>
                <li><a href="sqlref_statements_createtable.html"><code>CREATE&#160;TABLE</code></a>&#160;statement</li>
                <li><a href="sqlref_statements_insert.html"><code>INSERT</code></a>&#160;statement</li>
                <li><a href="sqlref_statements_delete.html"><code>DELETE</code></a>&#160;statement</li>
                <li><a href="developers_fundamentals_foreignkeys.html">Foreign Keys</a> in the <em>Developer's Guide</em>.</li>
                <li><a href="developers_fundamentals_triggers.html">Triggers</a> in the <em>Developer's Guide</em>.</li>
                <li><a href="sqlref_statements_update.html"><code>UPDATE</code></a>&#160;statement</li>
            </ul>
        </div>
	</section>
