---
title: Examples of Using Splice Machine's Explain Plan
summary: Presents examples of output from using the Splice Machine Explain Plan features.
keywords: explain plan
toc: false
product: all
sidebar: developers_sidebar
permalink: developers_tuning_explainplan_examples.html
folder: Developers/TuningAndDebugging
---
	<section>
		<div class="TopicContent" data-swiftype-index="true">
            <h1>Explain Plan Examples</h1>
            <p>This topic contains the following examples of using the <code>explain</code> command to display the execution plan for a statement, including the following examples:</p>
            <ul>
                <li><a href="#TableSca">TableScan Examples</a>
                </li>
                <li><a href="#IndexSca">IndexScan Examples</a>
                </li>
                <li><a href="#Projecti">Projection and Restriction Examples</a>
                </li>
                <li><a href="#Index">Index Lookup</a>
                </li>
                <li><a href="#Join">Join Example</a>
                </li>
                <li><a href="#Union">Union Example</a>
                </li>
                <li><a href="#Order">Order By Example</a>
                </li>
                <li><a href="#Aggregat">Aggregation Operation Examples</a>
                </li>
                <li><a href="#Subquery">Subquery Example</a>
                </li>
            </ul>
            <p class="noteIcon">The format and meaning of the common fields in the output plans shown here is found in the previous topic, <a href="developers_tuning_explainplan.html">About Explain Plan</a>.</p>
            <h2 id="TableSca">TableScan Examples</h2>
            <p>This example show a plan for a <code>TableScan</code> operation that has no qualifiers, known as a <em>raw scan</em>:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt; explain select * from sys.systables;<br /><br />Plan
-------------------------------------------------------------------------------------------------
Cursor(n=3,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=2,totalCost=8.594,outputRows=20,outputHeapSize=3.32 KB,partitions=1)
    -&gt;  TableScan[SYSTABLES(48)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=3.32 KB,partitions=1)

3 rows selected</pre>
            </div>
            <p>This example show a plan for a <code>TableScan</code> operation that does have qualifiers::</p>
            <div class="preWrapperWide"><pre class="AppCommand">splice&gt;&#160;explain select *&#160;from sys.systables --SPLICE-PROPERTIES index=NULL<br />&#160;&#160;&#160;where tablename='SYSTABLES';<br /><br />Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=3,rows=18,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=2,totalCost=8.54,outputRows=18,outputHeapSize=2.988 KB,partitions=1)
    -&gt;  TableScan[SYSTABLES(48)](n=1,totalCost=4.054,outputRows=18,outputHeapSize=2.988 KB,partitions=1,preds=[(TABLENAME[0:2] = SYSTABLES)])

3 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>
                    <p>The plan labels this operation as <code>TableScan[</code><em>tableId</em>(<em>conglomerateId</em>)<code>]</code>:</p>
                    <ul class="SecondLevel">
                        <li><em>tableId</em> is the name of the table, in the form <code>schemaName '.' tableName</code>.</li>
                        <li><em>conglomerateId</em> is an ID&#160;that is unique to every HBase table; this value is used internally, and can be used for certain administrative tasks</li>
                    </ul>
                </li>
                <li>The <code>preds</code> field includes qualifiers that were pushed down to the base table.</li>
            </ul>
            <h2 id="IndexSca">IndexScan Examples</h2>
            <p>This example show a plan for an <code>IndexScan</code> operation that has no predicates:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename from sys.systables; --covering index

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=3,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=2,totalCost=8.31,outputRows=20,outputHeapSize=560 B,partitions=1)
    -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=560 B,partitions=1,baseTable=SYSTABLES(32))

3 rows selected<br /></pre>
            </div>
            <p>This example shows a plan for an <code>IndexScan</code> operation that contains predicates:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename from sys.systables --SPLICE-PROPERTIES index=SYSTABLES_INDEX1
        where tablename = 'SYSTABLES';

Plan
-------------------------------------------------------------------------------------------------Cursor(n=3,rows=18,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=2,totalCost=8.272,outputRows=18,outputHeapSize=432 B,partitions=1)
    -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.049,outputRows=18,outputHeapSize=432 B,partitions=1,baseTable=SYSTABLES(48),preds=[(TABLENAME[0:1] = SYSTABLES)])

3 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>
                    <p>The plan labels this operation as <code>IndexScan[</code><em>indexId(conglomerateId)</em><code>]</code>:</p>
                    <ul class="SecondLevel">
                        <li><em>indexId</em> is the name of the index</li>
                        <li><em>conglomerateId</em> is an ID&#160;that is unique to every HBase table; this value is used internally, and can be used for certain administrative tasks</li>
                    </ul>
                </li>
                <li>The <code>preds</code> field includes qualifiers that were pushed down to the base table.</li>
            </ul>
            <h2 id="Projecti">Projection and Restriction Examples</h2>
            <p>This example show a plan for a <code>Projection</code> operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename || 'hello' from sys.systables;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=4,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=3,totalCost=8.302,outputRows=20,outputHeapSize=480 B,partitions=1)
    -&gt;  ProjectRestrict(n=2,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1)
      -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1,baseTable=SYSTABLES(48))

4 rows selected</pre>
            </div>
            <p>This example shows a plan for a <code>Restriction</code> operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename from sys.systables
&#160;       where tablename like '%SYS%';

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=4,rows=10,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=3,totalCost=8.178,outputRows=10,outputHeapSize=240 B,partitions=1)
    -&gt;  ProjectRestrict(n=2,totalCost=4.054,outputRows=10,outputHeapSize=240 B,partitions=1,preds=[like(TABLENAME[0:1], %SYS%)])
      -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=240 B,partitions=1,baseTable=SYSTABLES(48))

4 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>The plan labels both projection and restriction operations as <code>ProjectRestrict</code>. which can contain both <em>projections</em> and <em>non-qualifier restrictions</em>. A <em>non-qualifier restriction</em> is a predicate that cannot be pushed to the underlying table scan.</li>
            </ul>
            <h2 id="Index">Index Lookup</h2>
            <p>This example shows a plan for an <code>IndexLookup</code> operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select * from SYS.SYSTABLES --SPLICE-PROPERTIES index=SYSTABLES_INDEX1
where tablename = 'SYSTABLES';;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=4,rows=18,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=3,totalCost=177.265,outputRows=18,outputHeapSize=921.586 KB,partitions=1)
    -&gt;  IndexLookup(n=2,totalCost=78.715,outputRows=18,outputHeapSize=921.586 KB,partitions=1)
      -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=6.715,outputRows=18,outputHeapSize=921.586 KB,partitions=1,baseTable=SYSTABLES(48),preds=[(TABLENAME[1:2] = SYSTABLES)])</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>The plan labels the operation as <code>IndexLookup</code>; you may see this labeled as an <code>IndexToBaseRow</code> operation elsewhere.</li>
                <li>Plans for <code>IndexLookup</code> operations do not contain any special fields.</li>
            </ul>
            <h2 id="Join">Join Example</h2>
            <p>This example shows a plan for a <code>Join</code> operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select * from sys.systables t, sys.sysschemas s
        where t.schemaid =s.schemaid;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=5,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=4,totalCost=21.728,outputRows=20,outputHeapSize=6.641 KB,partitions=1)
    -&gt;  BroadcastJoin(n=3,totalCost=12.648,outputRows=20,outputHeapSize=6.641 KB,partitions=1,preds=[(T.SCHEMAID[4:4] = S.SCHEMAID[4:8])])
      -&gt;  TableScan[SYSSCHEMAS(32)](n=2,totalCost=4.054,outputRows=20,outputHeapSize=6.641 KB,partitions=1)
      -&gt;  TableScan[SYSTABLES(48)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=3.32 KB,partitions=1)

5 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>
                    <p>The plan labels the operation using the <em>join type</em> followed by <code>Join</code>; the possible values are:</p>
                    <ul class="SecondLevel">
                        <li class="CodeFont" value="1">BroadcastJoin</li>
                        <li class="CodeFont" value="2">MergeJoin</li>
                        <li class="CodeFont" value="3">MergeSortJoin</li>
                        <li class="CodeFont" value="4">NestedLoopJoin</li>
                        <li class="CodeFont" value="5">OuterJoin</li>
                    </ul>
                </li>
                <li>The plan may include a <code>preds</code> field, which lists the join predicates.</li>
                <li><code>NestedLoopJoin</code> operations do not include a <code>preds</code> field; instead, the predicates are listed in either a <code>ProjectRestrict</code> or in the underlying scan.</li>
                <li>
                    <p>The right side of the <em>Join</em> operation is listed first, followed by the left side of the join.</p>
                </li>
            </ul>
            <h3>Outer Joins</h3>
            <p>An <em>outer join</em> does not display it as a separate strategy in the plan; instead, it is treated a <em>postfix</em> for the strategy that's used. For example, if you are using a Broadcast join, and it's a left outer join, then you'll see <code>BroadcastLeftOuterJoin</code>. Here's an example:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">explain select s.schemaname,t.tablename from sys.sysschemas s left outer join sys.systables t
&gt; on s.schemaid = t.schemaid;
Plan
-------------------------------------------------------------------------------------------------
Cursor(n=6,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=5,totalCost=348.691,outputRows=20,outputHeapSize=2 MB,partitions=1)
    -&gt;  ProjectRestrict(n=4,totalCost=130.579,outputRows=20,outputHeapSize=2 MB,partitions=1)
      -&gt;  BroadcastLeftOuterJoin(n=3,totalCost=130.579,outputRows=20,outputHeapSize=2 MB,partitions=1,preds=[(S.SCHEMAID[4:1] = T.SCHEMAID[4:4])])
        -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=2,totalCost=7.017,outputRows=20,outputHeapSize=2 MB,partitions=1,baseTable=SYSTABLES(48))
        -&gt;  TableScan[SYSSCHEMAS(32)](n=1,totalCost=7.516,outputRows=20,outputHeapSize=1023.984 KB,partitions=1)</pre>
            </div>
            <h2 id="Union">Union Example</h2>
            <p>This example shows a plan for a <code>Union</code> operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename from sys.systables t union all select schemaname from sys.sysschemas;

Plan
-------------------------------------------------------------------------------------------------
Cursor(n=5,rows=40,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=4,totalCost=16.668,outputRows=40,outputHeapSize=1.094 KB,partitions=1)
    -&gt;  Union(n=3,totalCost=12.356,outputRows=40,outputHeapSize=1.094 KB,partitions=1)
      -&gt;  IndexScan[SYSSCHEMAS_INDEX1(209)](n=2,totalCost=4.054,outputRows=20,outputHeapSize=1.094 KB,partitions=1,baseTable=SYSSCHEMAS(32))
      -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1,baseTable=SYSTABLES(48))

5 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>The right side of the <code>Union</code> is listed first, followed by the left side of the union,</li>
            </ul>
            <h2 id="Order">Order By Example</h2>
            <p>This example shows a plan for an order by operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename from sys.systables order by tablename desc;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=4,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=3,totalCost=16.604,outputRows=20,outputHeapSize=480 B,partitions=1)
    -&gt;  OrderBy(n=2,totalCost=12.356,outputRows=20,outputHeapSize=480 B,partitions=1)
      -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1,baseTable=SYSTABLES(48))

4 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>The plan labels this operation as <code>OrderBy</code>.</li>
            </ul>
            <h2 id="Aggregat">Aggregation Operation Examples</h2>
            <p>This example show a plan for a grouped aggregate operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename, count(*) from sys.systables group by tablename;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=6,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=5,totalCost=12.568,outputRows=20,outputHeapSize=480 B,partitions=16)
    -&gt;  ProjectRestrict(n=4,totalCost=8.32,outputRows=20,outputHeapSize=480 B,partitions=16)
      -&gt;  GroupBy(n=3,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1)
        -&gt;  ProjectRestrict(n=2,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1)
          -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1,baseTable=SYSTABLES(48))

6 rows selected)</pre>
            </div>
            <p>This example shows a plan for a scalar aggregate operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select count(*) from sys.systables;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=6,rows=1,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=5,totalCost=8.797,outputRows=1,outputHeapSize=0 B,partitions=1)
    -&gt;  ProjectRestrict(n=4,totalCost=4.257,outputRows=1,outputHeapSize=0 B,partitions=1)
      -&gt;  GroupBy(n=3,totalCost=4.054,outputRows=20,outputHeapSize=3.32 KB,partitions=1)
        -&gt;  ProjectRestrict(n=2,totalCost=4.054,outputRows=20,outputHeapSize=3.32 KB,partitions=1)
          -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=3.32 KB,partitions=1,baseTable=SYSTABLES(48))

6 rows selected
</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>The plan labels both grouped and scaled aggregate operations as <code>GroupBy</code>.</li>
            </ul>
            <h2 id="Subquery">Subquery Example</h2>
            <p>This example shows a plan for a <code>SubQuery</code> operation:</p>
            <div class="preWrapperWide"><pre class="AppCommand" xml:space="preserve">splice&gt;&#160;explain select tablename, (select tablename from sys.systables t2 where t2.tablename = t.tablename)from sys.systables t;

Plan
-------------------------------------------------------------------------------------------------<br />Cursor(n=6,rows=20,updateMode=READ_ONLY (1),engine=control)
  -&gt;  ScrollInsensitive(n=5,totalCost=8.302,outputRows=20,outputHeapSize=480 B,partitions=1)
    -&gt;  ProjectRestrict(n=4,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1)
      -&gt;  Subquery(n=3,totalCost=12.55,outputRows=20,outputHeapSize=480 B,partitions=1,correlated=true,expression=true,invariant=true)
        -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=2,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1,baseTable=SYSTABLES(48),preds=[(T2.TABLENAME[0:1] = T.TABLENAME[4:1])])
      -&gt;  IndexScan[SYSTABLES_INDEX1(145)](n=1,totalCost=4.054,outputRows=20,outputHeapSize=480 B,partitions=1,baseTable=SYSTABLES(48))

6 rows selected</pre>
            </div>
            <h3>Nodes</h3>
            <ul>
                <li>Subqueries are listed as a second query tree, whose starting indentation level is the same as the <code>ProjectRestrict</code> operation that <em>owns</em> the subquery.</li>
                <li>Includes a <em>correlated</em> field, which specifies whether or not the query is treated as correlated or uncorrelated.</li>
                <li>Includes an <em>expression</em> field, which specifies whether or not the subquery is an expression.</li>
                <li>Includes an <em>invariant</em> field, which indicates whether the subquery is invariant.</li>
            </ul>
            <h2>See Also</h2>
            <ul>
                <li><a href="developers_tuning_explainplan.html">About Explain Plan</a>
                </li>
            </ul>
        </div>
	</section>
