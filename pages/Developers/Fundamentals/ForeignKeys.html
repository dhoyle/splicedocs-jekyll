---
title: Using Foreign Keys
summary: Describes our implementation of foreign keys and how our implementation ensures referential integrity.
keywords: keys, foreign keys, referential integrity
toc: false
product: all
sidebar: developers_sidebar
permalink: developers_fundamentals_foreignkeys.html
folder: Developers/Fundamentals
---
	<section>
		<div class="TopicContent" data-swiftype-index="true" markdown="1">
            <h1>Foreign Keys and Referential Integrity</h1>
            <p>This topic describes the Splice Machine implementation of <em>foreign keys</em> and how our implementation ensures referential integrity.</p>
            <p>See our <em>SQL&#160;Reference Manual</em> for full reference information about defining foreign keys using using <a href="sqlref_clauses_constraint.html">constraint clauses</a> when <a href="sqlref_statements_createtable.html">creating </a>a database table.</p>
            <h2>About Foreign Keys</h2>
            <p>A foreign key is a column or group of columns in a relational database table that provides a link between data in two tables. A foreign key acts as a cross-reference between tables in that it references the primary key or unique key columns of another table, and thus establishes a link between them.</p>
            <p>The purpose of a foreign key is to identify a particular row of the referenced table; as such, the foreign key must be equal to the key in some row of the primary table, or else be <code>null</code>. This rule is called a <em>referential integrity constraint between the two tables</em>, and is usually abbreviated as just <em>referential integrity</em>. </p>
            <h3>Maintaining Referential Integrity</h3>
            <p>To maintain referential integrity, Splice Machine ensures that database operations do not violate foreign key constraints, including not allowing any operations that will cause a foreign key to not correspond to a row in the referenced table. This can happen when a row is inserted, updated, or deleted in either table.</p>
            <p> For example, suppose you have:</p>
            <ul>
                <li>A table named <code>Players</code> with primary key <code>player_id</code>. This table is called the <em>parent table</em> or <em>referenced table</em>.</li>
                <li>
                    <p>A second table named <code>PlayerStats</code> has a foreign key, which is also a column named <code>player_id</code>. This table is called the <em>child table</em> or <em>referencing table</em>.</p>
                </li>
            </ul>
            <p>The <code>player_id</code> column in the <em>referencing</em> table is the foreign key that references the primary key <code>player_id</code> in the <em>referenced</em> table. </p>
            <p>When you insert a new record into the referencing <code>PlayerStats</code> table, the insertion must satisfy the foreign key constraint, which means that it must include a <code>player_id</code> value that is present in the referenced <code>Players</code> table. If this is not so, the insert operation fails in order to maintain the table's referential integrity.</p>
            <h3>About Foreign Key Constraints</h3>
            <p>You can define a foreign key constraint on a table when you create the table with the <code><a href="sqlref_statements_createtable.html">CREATE&#160;TABLE</a></code>&#160;statement. Foreign key constraints are always immediate:&#160;a violation of a constraint immediately throws an exception.</p>
            <p>Here's an example of defining a foreign key, in which we use the <code>REFERENCES</code>&#160;clause of a column definition in a <code>CREATE&#160;TABLE</code>&#160;statement:</p>
            <div class="preWrapper"><pre class="Example">CREATE TABLE t1 (c1 NUMERIC PRIMARY KEY);

CREATE TABLE t2 (
   c1 NUMERIC PRIMARY KEY,
   c2 NUMERIC REFERENCES t1(c1) );</pre>
            </div>
            <p>And here's an example that uses the <code><a href="sqlref_clauses_constraint.html">CONSTRAINT</a></code>&#160;clause to name the foreign key constraint:</p><pre class="Example" xml:space="preserve">CREATE TABLE t3 (
   c1 NUMERIC,
   c2 NUMERIC,
   CONSTRAINT t1_fkey FOREIGN KEY (c1) REFERENCES t1);</pre>
            <p>You can also define a foreign key on a combination of columns:</p><pre class="Example" xml:space="preserve">CREATE TABLE dept_20
   (employee_id INT, hire_date DATE,
   CONSTRAINT fkey_empid_hiredate
   FOREIGN KEY (employee_id, hire_date)
   REFERENCES dept_21(employee_id, start_date));</pre>
            <h2>See Also</h2>
            <ul>
                <li><code><a href="sqlref_statements_altertable.html">ALTER&#160;TABLE</a></code>&#160;statement  in the <em>SQL&#160;Reference Manual</em></li>
                <li> <code><a href="sqlref_clauses_constraint.html">CONSTRAINT</a></code> clause  in the <em>SQL&#160;Reference Manual</em></li>
                <li><code><a href="sqlref_statements_createtable.html">CREATE&#160;TABLE</a></code>&#160;statement  in the <em>SQL&#160;Reference Manual</em></li>
                <li><a href="developers_fundamentals_triggers.html">Using Database Triggers</a>
                </li>
            </ul>
            <p>&#160;</p>
        </div>
	</section>
