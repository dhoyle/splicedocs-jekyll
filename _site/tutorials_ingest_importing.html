<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="How to import data into your Splice Machine database.">
<meta name="keywords" content=" import, load data, import data, importing from, compression, encoding, separator">
<title>How to Import Data into Your Splice Machine Database | Splice Machine Documentation</title>
<meta class="swiftype" name="title" data-type="string" content="How to Import Data into Your Splice Machine Database">
<meta class="swiftype" name="info" data-type="string" content="How to import data into your Splice Machine database.">

<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!--<link rel="stylesheet" href="css/lavish-bootstrap.css"> -->
<!--<link rel="stylesheet" href="css/customstyles.css"> -->
<link rel="stylesheet" href="css/splicemain.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container-fluid topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Splice Machine Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->
                
                    
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Splice Machine<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="index.html">Welcome</a></li>
                               
                             
                                
                                   <li><a href="tutorials_intro.html">Tutorials</a></li>
                               
                             
                                
                                   <li><a href="sqlref_intro.html">SQL Reference Manual</a></li>
                               
                             
                                
                                   <li><a href="developers_intro.html">Developer's Manual</a></li>
                               
                             
                                
                                   <li><a href="cmdlineref_intro.html">Command Line Reference</a></li>
                               
                             
                                
                                   <li><a href="dbconsole_intro.html">Database Console</a></li>
                               
                             
                                
                                   <li><a href="notes_intro.html">General Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">DB-Service Only<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="dbaas_intro.html">Welcome!</a></li>
                               
                             
                                
                                   <li><a href="dbaas_cm_intro.html">Cloud Manager Guide</a></li>
                               
                             
                                
                                   <li><a href="dbaas_zep_intro.html">Using Zeppelin</a></li>
                               
                             
                                
                                   <li><a href="dbaas_info_intro.html">Release Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">On-Premise-DB Only<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="onprem_intro.html">Welcome!</a></li>
                               
                             
                                
                                   <li><a href="onprem_install_intro.html">Installation</a></li>
                               
                             
                                
                                   <li><a href="onprem_admin_intro.html">Administrator's Guide</a></li>
                               
                             
                                
                                   <li><a href="onprem_info_intro.html">Release Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                
                <li>
<!-- Start Swiftype search -->
                    <div id="swiftype-search-container">
                        <form>
                          <input type="text" class="st-default-search-input swiftype-input">
                          <button type="submit" class="swiftype-submit">Search</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container-fluid">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Splice Machine 2.6.1</li>
    
    
    
    <li>
        <a href="#">Splice Machine Tutorials</a>
        <ul>
            
            
            
            <li><a href="tutorials_intro.html">Introduction</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">splice> Command Line</a>
        <ul>
            
            
            
            <li><a href="tutorials_cli_usingcli.html">Getting Started With splice></a></li>
            
            
            
            
            
            
            <li><a href="tutorials_cli_scripting.html">Scripting splice></a></li>
            
            
            
            
            
            
            <li><a href="tutorials_cli_rlwrap.html">RlWrap Summary</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Ingestion and Streaming</a>
        <ul>
            
            
            
            <li><a href="tutorials_ingest_uploadtos3.html">Uploading Data to S3</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_configures3.html">Setting up S3 Access</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_tpch1.html">Importing TPCH Data</a></li>
            
            
            
            
            
            
            <li class="active"><a href="tutorials_ingest_importing.html">Importing Your Data</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_hfiles.html">Importing Your Data as HFiles</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_kafkaproducer.html">Creating a Kafka Producer</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_kafkafeed.html">Configuring a Kafka Feed</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_storm.html">Using Apache Storm</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_mqttSpark.html">MQTT&#160;Spark Streaming</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Analytics and Machine Learning</a>
        <ul>
            
            
            
            <li><a href="tutorials_ml_zeppelin.html">Using Zeppelin</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Connecting Programmatically</a>
        <ul>
            
            
            
            <li><a href="tutorials_connect_haproxy.html">Connecting through HAProxy</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_java.html">Connecting with Java</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_jruby.html">Connecting with JRuby</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_jython.html">Connecting with Jython</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_scala.html">Connecting with Scala</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_angular.html">Connecting with NodeJS</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_odbcinstall.html">Installing our ODBC&#160;Driver</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_python.html">Connecting with Python</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_odbcc.html">Connecting with C&#160;and ODBC</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Connecting BI Tools</a>
        <ul>
            
            
            
            <li><a href="tutorials_connect_dbeaver.html">Connecting DBeaver</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_dbvisualizer.html">Connecting DBVisualizer</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_cognos.html">Connecting Cognos</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_squirrel.html">Connecting SQuirreL</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_connect_tableau.html">Connecting Tableau</a></li>
            
            
            
            
        </ul>
     </li>
       
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-content">

<!--- Don't automatically put page summary at top - GRH 05/2017:
   
    <div class="summary">How to import data into your Splice Machine database.</div>
   
-->

    


    

  <section>
<div class="TopicContent" data-swiftype-index="true">
    <h1 id="how-to-import-data-into-splice-machine">How to Import Data Into Splice Machine</h1>

    <p>This tutorial describes how to import data into your Splice Machine
database, and includes a number of examples. It also contains specific
tips to help you with the details of getting your data correctly
imported. This tutorial contains these sections:</p>

    <ul>
      <li><a href="#Syntax">Import Procedures Syntax</a> summarizes the syntax for calling
the available Splice Machine import procedures, along with brief
descriptions of the parameters. This syntax applies to all three of
our data import procedures.</li>
      <li><a href="#ImportColVals">Inserting and Updating Column Values When Importing
Data</a> summarizes how table column values are updated
when importing data into a table.</li>
      <li><a href="#Import">Import Examples</a> contains several examples of importing
data.</li>
      <li><a href="#Tips">Tips for Importing Data into Splice Machine</a> provides specific
tips to apply when specifying your import parameters.</li>
    </ul>

    <p>The Splice Machine data import procedures allow you to perform bulk
imports that utilize the parallel processing power of Hadoop’s scale-out
architecture while distributing the data evenly into different region
servers to prevent “hot spots.” We utilize a custom-built, asynchronous
write pipeline, which is an extension to the native HBase pipeline, to
accomplish this effort.</p>

    <p>If you’re importing data from an S3 bucket on AWS, please review our
<a href="tutorials_ingest_configures3.html">Configuring an S3 Bucket for Splice Machine
Access</a> tutorial before proceeding.</p>

    <p class="noteIcon">Our <a href="#">Importing HFile Data tutorial</a> walks you through using our HFile
import procedure, which uses similar syntax and has improved
performance; however, the bulk HFile import requires extra work on your
part and lacks constraint checking.</p>

    <h2 id="three-different-procedures-for-loading-data">Three Different Procedures for Loading Data</h2>

    <p>Splice Machine provides three built-in system procedures that you can
use for loading data into a database table, each of which uses identical
syntax. You can specify which columns in the input data are to be
imported in the <code class="highlighter-rouge">insertColumnList</code> parameter; these procedures differ in
how they handle updating records when you specify an input column list
that isn’t 1-to-1 with the columns in the table.</p>

    <ul>
      <li>The <a href="sqlref_sysprocs_importdata.html"><code class="highlighter-rouge">SYSCS_UTIL.IMPORT_DATA</code></a>
procedure imports data into your database, creating a new record in
your table for each record in the imported data, and inserts the
default value of each column that is not specified in the input.</li>
      <li>The
<a href="sqlref_sysprocs_upsertdata.html"><code class="highlighter-rouge">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</code></a>
procedure inserts new records and <em>updates existing records</em> in the
table. It also inserts or updates the value in the table of each
column that is not specified in the input; inserting the default value
(or NULL if there is no default) for that column.</li>
      <li>The
<a href="sqlref_sysprocs_mergedata.html"><code class="highlighter-rouge">SYSCS_UTIL.MERGE_DATA_FROM_FILE</code></a>
procedure also updates existing records; however, it does not replace
values in the table for unspecified columns when updating an existing
record in the table.</li>
    </ul>

    <p><a href="#Example2">Example 2</a> illustrates how the <code class="highlighter-rouge">UPSERT</code> and <code class="highlighter-rouge">MERGE</code>
procedures differ in their handling of record updates.</p>

    <h2 id="Syntax">Import Procedures Syntax</h2>

    <p>In this section, we’ll go through the syntax used with our import
procedures, using the <code class="highlighter-rouge">SYSCS_UTIL.IMPORT_DATA</code> built-in system procedure
for examples.</p>

    <p class="noteIcon">You’ll find complete descriptions of these parameters in the reference
pages for the
<a href="sqlref_sysprocs_importdata.html"><code class="highlighter-rouge">SYSCS_UTIL.IMPORT_DATA</code></a>,  <a href="sqlref_sysprocs_upsertdata.html"><code class="highlighter-rouge">SYSCS_UTIL.UPSERT_DATA_FROM_FILE</code></a>,  and
<a href="sqlref_sysprocs_mergedata.html"><code class="highlighter-rouge">SYSCS_UTIL.MERGE_DATA_FROM_FILE</code></a>
procedures.</p>

    <p>The syntax for calling these procedures includes a large number of
parameters:</p>

    <div class="fcnWrapperWide">
      <div class="FcnSyntax highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA (
		schemaName,
		tableName,
		insertColumnList | null,
		fileOrDirectoryName,
		columnDelimiter | null,
		characterDelimiter | null,
		timestampFormat | null,
		dateFormat | null,
		timeFormat | null,
		badRecordsAllowed,
		badRecordDirectory | null,
		oneLineRecords | null,
		charset | null
		);
</code></pre>
      </div>

    </div>
    <p>These parameters are described in detail in the <a href="sqlref_sysprocs_importdata.html">SQL Reference
Manual</a>; here are brief descriptions:</p>

    <table>
                <col />
                <col />
                <col />
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Description</th>
                        <th>Example Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>schemaName</code></td>
                        <td>The name of the schema of the table in which to import.</td>
                        <td><code>SPLICE</code></td>
                    </tr>
                    <tr>
                        <td><code>tableName</code></td>
                        <td>The name of the table in which to import</td>
                        <td><code>playerTeams</code></td>
                    </tr>
                    <tr>
                        <td><code>insertColumnList</code></td>
                        <td>The names, in single quotes, of the columns to import. If this is <code>null</code>, all columns are imported.</td>
                        <td><code>'ID, TEAM'</code></td>
                    </tr>
                    <tr>
                        <td><code>fileOrDirectoryName</code></td>
                        <td>
                            <p>Either a single file or a directory. If this is a single file, that file is imported; if this is a directory, all of the files in that directory are imported. You can import compressed or uncompressed files.</p>
                            <p class="noteNote">You can specify a directory or a single file when using the <code>SYSCS_UTIL.IMPORT_DATA</code> or <code>SYSCS_UTIL.UPSERT_DATA_FROM_FILE</code> procedures; however, you can only specify a single file when using the <code>SYSCS_UTIL.MERGE_DATA_FROM_FILE</code> procedure.</p>
                            <p>If you're importing data from an S3 bucket on AWS, please review our <a href="tutorials_ingest_configures3.html">Configuring an S3 Bucket for Splice Machine Access</a> tutorial before proceeding.</p>
                            <p class="noteIcon">You must specify a directory in an S3 bucket when importing data into your Splice Machine Database-as-Service database, and you must possess the access key/secret key pair for that S3 bucket.</p>
                            <p>See these tips:</p>
                            <ul class="bullet">
                                <li><a href="#Tip">Tip #1:  Specifying the File Location
</a>
                                </li>
                                <li><a href="#Tip2">Tip #2:  Import Large Datasets in Groups of Files</a>
                                </li>
                                <li><a href="#Tip3">Tip #3:  Don't Compress Your Files With GZIP</a>
                                </li>
                            </ul>
                        </td>
                        <td class="CodeFont">
                            <p>/data/mydata/mytable.csv</p>
                            <p>'s3a://splice-benchmark-data/flat/TPCH/100/region'</p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>columnDelimiter</code></td>
                        <td>
                            <p>The character used to separate columns, Specify <code>null</code> if using the comma (<code>,</code>) character as your delimiter. </p>
                            <p>See <a href="#Tip4">Tip #4:  Use Special Characters for Delimiters</a>.</p>
                        </td>
                        <td class="CodeFont">
                            <p>'|'</p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>characterDelimiter</code></td>
                        <td>
                            <p>The character is used to delimit strings in the imported data. </p>
                            <p>See <a href="#Tip4">Tip #4:  Use Special Characters for Delimiters</a>.</p>
                        </td>
                        <td><code>''</code></td>
                    </tr>
                    <tr>
                        <td><code>timestampFormat</code></td>
                        <td>
                            <p>The format of timestamps stored in the file. You can set this to <code>null</code> if there are no time columns in the file, or if the format of any timestamps in the file match the <code>Java.sql.Timestamp</code> default format, which is: "<em>yyyy-MM-dd HH:mm:ss</em>".</p>
                            <p>See <a href="#Tip5">Tip #5:  Avoid Problems With Date, Time, and Timestamp Formats</a>.</p>
                        </td>
                        <td class="CodeFont">
                            <p>'yyyy-MM-dd HH:mm:ss.SSZ'</p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>dateFormat</code></td>
                        <td>
                            <p>The format of datestamps stored in the file. You can set this to <code>null</code> if there are no date columns in the file, or if the format of any dates in the file match pattern: "<em>yyyy-MM-dd</em>".</p>
                            <p>See <a href="#Tip5">Tip #5:  Avoid Problems With Date, Time, and Timestamp Formats</a>.</p>
                        </td>
                        <td><code>yyyy-MM-dd</code></td>
                    </tr>
                    <tr>
                        <td><code>timeFormat</code></td>
                        <td>
                            <p>The format of time values stored in the file. You can set this to null if there are no time columns in the file, or if the format of any times in the file match pattern: "<em>HH:mm:ss</em>".</p>
                            <p>See <a href="#Tip5">Tip #5:  Avoid Problems With Date, Time, and Timestamp Formats</a>.</p>
                        </td>
                        <td><code>HH:mm:ss</code></td>
                    </tr>
                    <tr>
                        <td><code>badRecordsAllowed</code></td>
                        <td>
                            <p>The number of rejected (bad) records that are tolerated before the import fails. If this count of rejected records is reached, the import fails, and any successful record imports are rolled back.
 Specify 0 to indicate that no bad records are tolerated, and specify -1 to indicate that all bad records should be logged and allowed.</p>
                        </td>
                        <td class="CodeFont">
                            <p>25</p>
                        </td>
                    </tr>
                    <tr>
                        <td><code>badRecordDirectory</code></td>
                        <td>
                            <p>The directory in which bad record information is logged. Splice Machine logs information to the <code>&lt;import_file_name&gt;.bad</code> file in this directory; for example, bad records in an input file named <code>foo.csv</code> would be logged to a file named <em>badRecordDirectory</em><code>/foo.csv.bad</code>.</p>
                            <p>If you're logging bad record information to an S3 bucket on AWS, please review our <a href="tutorials_ingest_configures3.html">Configuring an S3 Bucket for Splice Machine Access</a> tutorial before proceeding.</p>
                            <p class="noteIcon">you must specify a directory in an S3 bucket when importing data into your Splice Machine Database-as-Service database, and you must possess the access key/secret key pair for that S3 bucket.</p>
                            <p>See these tips:</p>
                            <ul class="bullet">
                                <li><a href="#Tip">Tip #1:  Specifying the File Location</a></li>
                                <li><a href="#Tip6">Tip #6:  Change the Bad Directory for Each Table / Group</a>.</li>
                            </ul>
                        </td>
                        <td><code>'importErrsDir'</code></td>
                    </tr>
                    <tr>
                        <td><code>oneLineRecords</code></td>
                        <td>
                            <p>A Boolean value that specifies whether (<code>true</code>) each record in the import file is contained in one input line, or (<code>false</code>) if a record can span multiple lines. </p>
                            <p>See <a href="#Tip7">Tip #7:  Importing Multi-line Records</a>.</p>
                        </td>
                        <td><code>true</code></td>
                    </tr>
                    <tr>
                        <td><code>charset</code></td>
                        <td>
                            <p>The character encoding of the import file. The default value is UTF-8. </p>
                            <p class="noteIcon">Currently, any other value is ignored and UTF-8 is used.</p>
                        </td>
                        <td><code>null</code></td>
                    </tr>
                </tbody>
            </table>
    <div class="highlighter-rouge"><pre class="highlight"><code>    &lt;h2 id="ImportColVals"&gt;Inserting and Updating Column Values When Importing Data&lt;/h2&gt;
    &lt;p&gt;This section summarizes what happens when you are importing, upserting, or merging records into a database table, based on:&lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;Whether you are importing a new record or updating an existing record.&lt;/li&gt;
        &lt;li&gt;If the column is specified in your &lt;code&gt;insertColumnList&lt;/code&gt; parameter.&lt;/li&gt;
        &lt;li&gt;If the table column is a generated value or has a default value.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;p&gt;The important difference in actions taken when importing data occurs when you are updating an existing record with the UPSERT or MERGE and your column list does not contain the name of a table column:&lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;For newly inserted records, the default or auto-generated value is always inserted, as usual.&lt;/li&gt;
        &lt;li&gt;If you are updating an existing record in the table with &lt;code&gt;UPSERT&lt;/code&gt;, the default auto-generated value in that record is overwritten with a new value.&lt;/li&gt;
        &lt;li&gt;If you are updating an existing record in the table with &lt;code&gt;MERGE&lt;/code&gt;, the column value is not updated.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Importing a New Record Into a Database Table&lt;/h3&gt;
    &lt;p&gt;The following table shows the actions taken when you are importing new records into a table in your database. These actions are the same for all three importation procedures (IMPORTing, UPSERTing, or MERGEing):
    &lt;table&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Column included in &lt;code&gt;importColumnList&lt;/code&gt;?&lt;/th&gt;
                &lt;th&gt;Table column conditions&lt;/th&gt;
                &lt;th&gt;Action Taken&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;YES&lt;/td&gt;
                &lt;td&gt;N/A&lt;/td&gt;
                &lt;td&gt;Import value inserted into table column if valid; if not valid, a bad record error is logged.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td rowspan="3"&gt;NO&lt;/td&gt;
                &lt;td&gt;Has Default Value&lt;/td&gt;
                &lt;td&gt;Default value is inserted into table column.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Is Generated Value&lt;/td&gt;
                &lt;td&gt;Generated value is inserted into table column.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;None&lt;/td&gt;
                &lt;td&gt;NULL is inserted into table column.&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;p&gt;The table below shows what happens with default and generated column values when adding new records to a table using one of our import procedures; we use an example database table created with this statement:&lt;/p&gt;&lt;pre class="Example"&gt;CREATE TABLE myTable (&lt;br /&gt;   colA INT,&lt;br /&gt;   colB CHAR(12) DEFAULT 'myDefaultVal',&lt;br /&gt;   colC INT);&lt;/pre&gt;
    &lt;table summary="Detailed example of what gets imported for different input values in a new record"&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;&lt;span class="CodeBoldFont"&gt;insertColumnList&lt;/span&gt;
                &lt;/th&gt;
                &lt;th&gt;Values in import record&lt;/th&gt;
                &lt;th&gt;Values inserted into database&lt;/th&gt;
                &lt;th&gt;Notes&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;"colA,colB,colC"&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;1,,2&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[1,NULL,2]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;"colA,colB,colC"&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;3,de,4&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[3,de,4]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;"colA,colB,colC"&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;1,2,&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;Error: column B wrong type&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;"colA,colB,colC"&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;1,DEFAULT,2&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[1,"DEFAULT",2]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;DEFAULT&lt;/code&gt; is imported as a literal value&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;Empty&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;1,,2&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[1,myDefaultVal,2]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;Empty&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;3,de,4&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[3,de,4]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;Empty&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;1,2,&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;Error: column B wrong type&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;"colA,colC"&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;1,2&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[1,myDefaultVal,2]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;&lt;code&gt;"colA,colC"&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;3,4&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt;&lt;code&gt;[3,myDefaultVal,4]&lt;/code&gt;&lt;/td&gt;
                &lt;td&gt; &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;p&gt; Note that the value `DEFAULT`&lt;/span&gt;` in the imported file &lt;strong&gt;is not interpreted&lt;/strong&gt; to mean that the default value should be applied to that column; instead:&lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;If the target column in your database has a string data type, such as &lt;code&gt;CHAR&lt;/code&gt; or &lt;code&gt;VARCHAR&lt;/code&gt;, the literal value &lt;code&gt;"DEFAULT"&lt;/code&gt; is inserted into your database..&lt;/li&gt;
        &lt;li&gt;If the target column is not a string data type, an error will occur.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h4&gt;Importing New Records That Contain Generated or Default Values&lt;/h3&gt;
    &lt;p&gt;When you export a table with generated columns to a file, the actual column values are exported, so importing that same file into a different database will accurately replicate the original table values.&lt;/p&gt;
    &lt;p&gt;If you are importing previously exported records into a table with a generated column, and you want to import some records with actual values and apply generated or default values to other records, you need to split your import file into two files and import each:&lt;/p&gt;
    &lt;ul&gt;
        &lt;li&gt;Import the file containing records with non-default values with the column name included in the &lt;code&gt;insertColumnList&lt;/code&gt;.&lt;/li&gt;
        &lt;li&gt;Import the file containing records with default values with the column name excluded from the &lt;code&gt;insertColumnList&lt;/code&gt;.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;h3&gt;Updating a Table Record with UPSERT&lt;/h3&gt;
    &lt;p&gt;The following table shows the action taken when you are using the &lt;code&gt;SYSCS_UTIL.UPSERT_DATA_FROM_FILE&lt;/code&gt; procedure to update an existing record in a database table:&lt;/p&gt;
    &lt;table&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Column included in &lt;code&gt;importColumnList&lt;/code&gt;?&lt;/th&gt;
                &lt;th&gt;Table column conditions&lt;/th&gt;
                &lt;th&gt;Action Taken&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;YES&lt;/td&gt;
                &lt;td&gt;N/A&lt;/td&gt;
                &lt;td&gt;Import value updated in table column if valid; if not valid, a bad record error is logged.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td rowspan="3"&gt;NO&lt;/td&gt;
                &lt;td&gt;Has Default Value&lt;/td&gt;
                &lt;td&gt;Table column is overwritten with default value.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;Is Generated Value&lt;/td&gt;
                &lt;td&gt;Table column is overwritten with newly generated value.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td&gt;None&lt;/td&gt;
                &lt;td&gt;Table column is overwritten with NULL value.&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;h3&gt;Updating a Table Record with MERGE&lt;/h3&gt;
    &lt;p&gt;The following table shows the action taken when you are using the &lt;code&gt;SYSCS_UTIL.MERGE_DATA_FROM_FILE&lt;/code&gt; procedure to update an existing record in a database table:&lt;/p&gt;
    &lt;table&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;col /&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th&gt;Column included in &lt;code&gt;importColumnList&lt;/code&gt;?&lt;/th&gt;
                &lt;th&gt;Table column conditions&lt;/th&gt;
                &lt;th&gt;Action Taken&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
            &lt;tr&gt;
                &lt;td&gt;YES&lt;/td&gt;
                &lt;td&gt;N/A&lt;/td&gt;
                &lt;td&gt;Import value updated in table column if valid; if not valid, a bad record error is logged.&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td rowspan="3"&gt;NO&lt;/td&gt;
                &lt;td&gt;N/A&lt;/td&gt;
                &lt;td&gt;Table column is not updated.&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;h4&gt;Generated Column Import Examples&lt;/h4&gt;
    &lt;p&gt;Our &lt;a href="tutorials_ingest_importing.html"&gt;Importing Data&lt;/a&gt; tutorial includes an example that illustrates this difference. We recommend reviewing it before upserting or merging data into a table.&lt;/p&gt;
</code></pre>
    </div>

    <h2 id="Import">Import Examples</h2>

    <p>This section provides several examples of importing data into Splice
Machine:</p>

    <ul>
      <li><a href="#Example1">Example 1: Importing data into a table with fewer columns than in the
file</a></li>
      <li><a href="#Example2">Example 2: How Upsert and Merge handle missing columns
differently</a></li>
      <li><a href="#Example3">Example 3: Importing a subset of data from a file into a
table</a></li>
      <li><a href="#Example4">Example 4: Specifying a timestamp format for an entire
table</a></li>
      <li><a href="#Example5">Example 5: Importing strings with embedded special characters
</a></li>
      <li><a href="#Example6">Example 6: Using single quotes to delimit strings</a></li>
    </ul>

    <h3 id="Example1">Example 1: Importing data into a table with fewer columns than in the file</h3>

    <p>If the table into which you’re importing data has less columns than the
data file that you’re importing, how the “extra” data columns in the
input data are handled depends on whether you specify an
<code class="highlighter-rouge">insertColumnList</code>:</p>

    <ul>
      <li>If you don’t specify a specify an insertColumnList and your input file
contains more columns than are in the table, then the the extra
columns at the end of each line in the input file are ignored. For
example, if your table contains columns (a, b, c) and your file
contains columns (a, b, c, d, e), then the data in your file’s d and e
columns will be ignored.</li>
      <li>If you do specify an insertColumnList, and the number of columns
doesn’t match your table, then any other columns in your table will be
replaced by the default value for the table column (or NULL if there
is no default for the column). For example, if your table contains
columns (a, b, c) and you only want to import columns (a, c), then the
data in table’s b column will be replaced with the default value for
that column.</li>
    </ul>

    <p>Here’s an example that does not specify a column list. If you create a
table with this statement:</p>

    <div class="preWrapper">
      <div class="Example highlighter-rouge"><pre class="highlight"><code>CREATE TABLE playerTeams(ID int primary key, Team VARCHAR(32));
</code></pre>
      </div>

    </div>
    <p>And your data file looks like this:</p>

    <div class="preWrapper">
      <div class="Example highlighter-rouge"><pre class="highlight"><code>1,Cards,Molina,Catcher2,Giants,Posey,Catcher3,Royals,Perez,Catcher
</code></pre>
      </div>

    </div>
    <p>When you import the file into <code class="highlighter-rouge">playerTeams</code>, only the first two columns
are imported:</p>

    <div class="preWrapperWide">
      <div class="Example highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA('SPLICE','playerTeams',null, 'myData.csv',
   null, null, null, null, null, 0, 'importErrsDir', true, null);SELECT * FROM playerTeams ORDER by ID;ID   |TEAM
--------------
1    |Cards2    |Giants
3    |Royals3 rows selected
</code></pre>
      </div>

    </div>
    <h3 id="Example2">How Missing Columns are Handled With an Insert Column List</h3>

    <div class="highlighter-rouge"><pre class="highlight"><code>    &lt;p1&gt;In this example, we'll illustrate how the different data import procedures modify columns in your table when you've specified an &lt;code&gt;insertColumnList&lt;/code&gt; that is not 1-to-1 with the columns in your table. The &lt;code&gt;SYSCS_UTIL.IMPORT_DATA&lt;/code&gt; and &lt;code&gt;SYSCS_UTIL.UPSERT_DATA_FROM_FILE&lt;/code&gt; procedures handle this situation in the same way, assigning default values (or NULL if no default is defined) to any table column that is not being inserted or updated from the input data file. The &lt;code&gt;SYSCS_UTIL.MERGE_DATA_FROM_FILE&lt;/code&gt; does not overwrite generated values when updating records.&lt;/p&gt;
    &lt;p class="noteNote"&gt;This distinction is particularly important when loading record updates into a table with auto-generated column values that you do not want overwritten.&lt;/p&gt;
    &lt;p&gt;We'll create two sample tables, populate each with the same data, and load the same input file data into each to illustrate the differences between how the &lt;code&gt;Upsert&lt;/code&gt; and &lt;code&gt;Merge&lt;/code&gt; procedures.&lt;/p&gt;
    &lt;div class="preWrap"&gt;&lt;pre class="Example"&gt;CREATE SCHEMA test; SET SCHEMA test; CREATE TABLE testUpsert (
     a1 INT,
     b1 INT,
     c1 INT GENERATED BY DEFAULT AS IDENTITY(start with 1, increment by 1),
     d1 INT DEFAULT 999,
     PRIMARY KEY (a1)  );
</code></pre>
    </div>

    <p>CREATE TABLE testMerge (
         a1 INT,
         b1 INT,
         c1 INT GENERATED BY DEFAULT AS IDENTITY(start with 1, increment by 1),
         d1 INT DEFAULT 999,
         PRIMARY KEY (a1)
 );</p>

    <p>INSERT INTO testUpsert(a1,b1) VALUES (1,1), (2,2), (3,3), (6,6);
splice&gt; select * from testUpsert;
A1         |B1         |C1         |D1
———————————————–
1          |1          |1          |999
2          |2          |2          |999
3          |3          |3          |999
6          |6          |4          |999</p>

    <p>4 rows selected</p>

    <p>INSERT INTO testMerge (a1,b1) VALUES (1,1), (2,2), (3,3), (6,6);
splice&gt; select * from testMerge;
A1         |B1         |C1         |D1
———————————————–
1          |1          |1          |999
2          |2          |2          |999
3          |3          |3          |999
6          |6          |4          |999</p>

    <p>4 rows selected
&lt;/pre&gt;</p>
  </div>
        <p class="spaceAbove">Note that column <code>c1</code> contains auto-generated values, and that column <code> d1</code>has the default value 999.
        <p>Here's the data that we're going to import from file <code>ttest.csv</code>:
        <div class="preWrap"><pre class="Example">0|0
1|2
2|4
3|6
4|8
</pre>
</div>
        <p class="spaceAbove">Now, let's call upsert and merge and view the results:</p>
        <div class="preWrap"><pre class="Example">

CALL SYSCS_UTIL.UPSERT_DATA_FROM_FILE('TEST','testUpsert','a1,b1','/Users/garyh/Documents/ttest.csv','|',null,null,null,null,0,'/var/tmp/bad/',false,null);
rowsImported        |failedRows          |files      |dataSize            |failedLog
-------------------------------------------------------------------------------------
5                   |0                   |1          |20                  |NONE

splice&gt; SELECT * FROM testUpsert;
A1         |B1         |C1         |D1
-----------------------------------------------
0          |0          |10001      |999
1          |2          |10002      |999
2          |4          |10003      |999
3          |6          |10004      |999
4          |8          |10005      |999
6          |6          |4          |999

6 rows selected

CALL SYSCS_UTIL.MERGE_DATA_FROM_FILE('TEST','testMerge','a1,b1','/Users/garyh/Documents/ttest.csv','|',null,null,null,null,0,'/var/tmp/bad/',false,null);
rowsUpdated         |rowsInserted        |failedRows          |files      |dataSize            |failedLog
---------------------------------------------------------------------------------------------------------
3                   |2                   |0                   |1          |20                  |NONE

splice&gt; select * from testMerge;
A1         |B1         |C1         |D1
-----------------------------------------------
0          |0          |10001      |999
1          |2          |1          |999
2          |4          |2          |999
3          |6          |3          |999
4          |8          |10002      |999
6          |6          |4          |999

6 rows selected
</pre>
</div>
        <p class="spaceAbove">You'll notice that:</p>
        <ul>
            <li>The generated column (<code>c1</code>) is not included in the <code>insertColumnList</code> parameter in these calls.</li>
            <li>The results are identical except for the values in the generated column.</li>
            <li>The generated values in <code>c1</code> are not updated in existing records when merging data, but are updated when upserting data.</li>
        </ul>

### Example 3: Importing a subset of data from a file into a table   {#Example3}

This example uses the same table and import file as does the previous
example, and it produces the same results, The difference between these
two examples is that this one explicitly imports only the first two
columns (which are named `ID` and `TEAM`) of the file:

<div class="preWrapper">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA('SPLICE','playerTeams', 'ID, TEAM', 'myData.csv',
 null, null, null, null, null, 0, 'importErrsDir', true, null);SELECT * FROM playerTeams ORDER by ID;ID   |TEAM
--------------
1    |Cards2    |Giants
3    |Royals3 rows selected
</code></pre>
        </div>

      </div>
### Example 4: Specifying a timestamp format for an entire table   {#Example4}

Use a single timestamp format for the entire table by explicitly
specifying a single `timeStampFormat`.

<div class="preWrapper">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>Mike,2013-04-21 09:21:24.98-05
Mike,2013-04-21 09:15:32.78-04
Mike,2013-03-23 09:45:00.68-05
</code></pre>
        </div>

      </div>
You can then import the data with the following call:

<div class="preWrapper">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA('app','tabx','c1,c2',
	'/path/to/ts3.csv',
	',', '''',
	'yyyy-MM-dd HH:mm:ss.SSZ',
	null, null, 0, null, true, null);
</code></pre>
        </div>

      </div>
Note that for any import use case shown above, the time shown in the
imported table depends on the timezone setting in the server timestamp.
In other words, given the same csv file, if imported on different
servers with timestamps set to different time zones, the value in the
table shown will be different. Additionally, daylight savings time may
account for a 1-hour difference if timezone is specified.

### Example 5: Importing strings with embedded special characters    {#Example5}

This example imports a csv file that includes newline (`Ctrl-M`)
characters in some of the input strings. We use the default double-quote
as our character delimiter to import data such as the following:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>1,This field is one line,Able
2,"This field has two lines
This is the second line of the field",Baker
3,This field is also just one line,Charlie
</code></pre>
        </div>

      </div>
We then use the following call to import the data:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>SYSCS_UTIL.IMPORT_DATA('SPLICE', 'MYTABLE', null, 'data.csv' , '\t', null, null, null, null, 0, 'importErrsDir', false, null);
</code></pre>
        </div>

      </div>
We can also explicitly specify double quotes (or any other character) as
our delimiter character for strings:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>SYSCS_UTIL.IMPORT_DATA('SPLICE', 'MYTABLE', null, 'data.csv', '\t', '"', null, null, null, 0, 'importErrsDir', false, null);
</code></pre>
        </div>

      </div>
### Example 6: Using single quotes to delimit strings   {#Example6}

This example performs the same import as the previous example, simply
substituting single quotes for double quotes as the character delimiter
in the input:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>1,This field is one line,Able
2,'This field has two lines
This is the second line of the field',Baker
3,This field is also just one line,Charlie
</code></pre>
        </div>

      </div>
Note that you must escape single quotes in SQL, which means that you
actually define the character delimiter parameter with four single
quotes, as follow

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>SYSCS_UTIL.IMPORT_DATA('SPLICE', 'MYTABLE', null, 'data.csv', '\t', '''', null, null, null, 0, 'importErrsDir', false, null);
</code></pre>
        </div>

      </div>
## Tips for Importing Data into Splice Machine   {#Tips}

This tutorial contains a number of tips that our users have found very
useful in determining the parameter settings to use when running an
import:

1.  [[Tip #1: Specifying the File Location ](#Tip)](#Tip)
2.  [[Tip #2: Import Large Datasets in Groups of Files](#Tip2)](#Tip2)
3.  [[Tip #3: Don't Compress Your Files With GZIP](#Tip3)](#Tip3)
4.  [[Tip #4: Use Special Characters for Delimiters](#Tip4)](#Tip4)
5.  [[Tip #5: Avoid Problems With Date, Time, and Timestamp
    Formats](#Tip5)](#Tip5)
6.  [[Tip #6: Change the Bad Directory for Each Table /
    Group](#Tip6)](#Tip6)
7.  [[Tip #7: Importing Multi-line Records](#Tip7)](#Tip7)
8.  [[Tip #8: Importing CLOBs and BLOBs](#Tip8)](#Tip8)
9.  [[Tip #9: Scripting Your Imports](#Tip9)](#Tip9)

### Tip #1: Specifying the File Location    {#Tip}

Some customers get confused by the the `fileOrDirectoryName` parameter.
How you use this depends on whether you are importing a single file or a
directory of files. It also depends on which version of Splice Machine
you are running: the cloud-managed Splice Machine Database-as-Service,
on a managed cluster, or a standalone version.

If you are running a stand alone environment, the name or path will be
to a file or directory on the file system. For example:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>/users/myname/mydata/mytable.csv/users/myname/mydatadir
</code></pre>
        </div>

      </div>
However, if you are running this on a cluster, the path is to a file on
HDFS (or the MapR File system). For example:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>/data/mydata/mytable.csv/data/myname/mydatadir
</code></pre>
        </div>

      </div>
#### Specifying an AWS S3 File Location

Finally, if you're importing data from an S3 bucket, you need to supply
your AWS access and secret key codes, and you need to specify an s3a
URL. Similarly for logging bad record information to an S3 bucket
directory, as will be the case when using our Database-as-Service
product. You can include the access keys inline; for example:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA ('TPCH', 'REGION', null, 's3a://(access key):(secret key)@splice-benchmark-data/flat/TPCH/100/region', '|', null, null, null, null, -1, 's3a://(access key):(secret key)@splice-benchmark-data/flat/TPCH/100/importLog', true, null);
</code></pre>
        </div>

      </div>
Alternatively, you can define the keys once in the `core-site.xml` file
on your cluster, and then simply specify the `s3a` URL; for example:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA ('TPCH', 'REGION', null, 's3a://splice-benchmark-data/flat/TPCH/100/region', '|', null, null, null, null, 0, '/BAD', true, null);
</code></pre>
        </div>

      </div>
To add your access and secret access keys to the `core-site.xml` file,
define the `fs.s3a.awsAccessKeyId` and `fs.s3a.awsSecretAccessKey`
properties in that file:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>&lt;property&gt;   &lt;name&gt;fs.s3a.awsAccessKeyId&lt;/name&gt;   &lt;value&gt;access key&lt;/value&gt;&lt;/property&gt;&lt;property&gt;   &lt;name&gt;fs.s3a.awsSecretAccessKey&lt;/name&gt;   value&gt;secret key&lt;/value&gt;&lt;/property&gt;
</code></pre>
        </div>

      </div>
### Tip #2: Import Large Datasets in Groups of Files   {#Tip2}

If you have a lot of data (100s of millions or billions of records), you
may be tempted to create one massive file that contains all of your
records and import that file; Splice Machine recommends against this;
instead, we urge you to manage your data in smaller files. Specifically,
we suggest that you split your data into files that are:

* approximately 40 GB
* have approximately 50 million records, depending on how wide your
  table is

If you have a lot of files, group them into multiple directories, and
import each directory individually. For example, here is a structure our
Customer Success engineers like to use:

* /data/mytable1/group1
* /data/mytable1/group2
* /data/mytable1/group3
{: .codeList}

### Tip #3: Don't Compress Your Files With GZIP   {#Tip3}

We recommend importing files that are either uncompressed, or have been
compressed with <span class="CodeBoldFont">bz2</span> or <span class="CodeBoldFont">lz4</span> compression.

If you import files compressed with `gzip`, Splice Machine cannot
distribute the contents of your file across your cluster nodes to take
advantage of parallel processing, which means that import performance
will suffer significantly with `gzip` files.

### Tip #4: Use Special Characters for Delimiters   {#Tip4}

One common gotcha we see with customer imports is when the data you're
importing includes a special character that you've designated as a
column or character delimiter. You'll end up with records in your bad
record directory and can spend hours trying to determine the issue, only
to discover that it's because the data includes a delimiter character.
This can happen with columns that contain data such as product
descriptions.

#### Column Delimiters

The standard column delimiter is a comma (`,`); however, we've all
worked with string data that contains commas, and have figured out to
use a different column delimiter. Some customers use the pipe (`|`)
character, but frequently discover that it is also used in some
descriptive data in the table they're importing.

We recommend using a control character like `CTRL-A` for your column
delimiter. This is known as the SOH character, and is represented by
0x01 in hexadecimal. Unfortunately, there's no way to enter this
character from the keyboard in the Splice Machine command line
interface; instead, you need to create a script file (see [Tip
#9](#Tip9)) and type the control character using a text editor like *vi*
or *vim*:

* Open your script file in vi or vim.
* Enter into INSERT mode.
* Type `CTRL-V` then `CTRL-A` for the value of the column delimiter
  parameter in your procedure call. Note that this typically echoes as
  `^A` when you type it in vi or vim.

#### Character Delimiters

By default, the character delimiter is a double quote. This can produce
the same kind of problems that we see with using a comma for the column
delimiter: columns values that include embedded quotes or use the double
quote as the symbol for inches. You can use escape characters to include
the embedded quotes, but it's easier to use a special character for your
delimiter.

We recommend using `CTRL-G`, which you can add to a script file (see
[Tip #9](#Tip9)), again using a text editor like *vi* or *vim*:

* Open your script file in vi or vim.
* Enter into INSERT mode.
* Type `CTRL-V` then `CTRL-G` for the value of the character delimiter
  parameter in your procedure call. Note that this typically echoes as
  `^G` when you type it in vi or vim.

### Tip #5: Avoid Problems With Date, Time, and Timestamp Formats   {#Tip5}

Perhaps the most common difficulty that customers have with importing
their data is with date, time, and timestamp values.

Splice Machine adheres to the Java `SimpleDateFormat` syntax for all
date, time, and timestamp values, `SimpleDateFormat` is described here:

[https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html][1]{:
target="_blank"}
{: .indentLevel1}

Splice Machine's implementation of `SimpleDateFormat` is case-sensitive;
this means, for example, that a lowercase `h` is used to represent an
hour value between 0 and 12, whereas an uppercase `H` is used to
represent an hour between 0 and 23.

Splice Machine's Import procedures only allow you to specify one format
each for the date, time, and timestamp columns in the table data you are
importing. This means that, for example, every date in the table data
must be in the same format.

<div class="notePlain">
        <p>All of the <code class="highlighter-rouge">Date</code> values in the file (or group of files) you are
importing must use the same date format.</p>

        <p>All of the <code class="highlighter-rouge">Time</code> values in the file (or group of files) you are
importing must use the same time format.</p>

        <p>All of the <code class="highlighter-rouge">Timestamp</code> values in the file (or group of files) you are
importing must use the same timestamp format.</p>

      </div>
A few additional notes:

* The `Timestamp` data type has a range of `1678-01-01` to `2261-12-31`.
  Some customers have used dummy timestamp values like `9999-01-01`,
  which will fail because the value is out of range for a timestamp.
  Note that this is not an issue with `Date` values.
* Splice Machine suggests that, if your data contains any date or
  timestamp values that are not in the format `yyyy-MM-dd HH:mm:ss`, you
  create a simple table that has just one or two columns and test
  importing the format. This is a simple way to confirm that the
  imported data is what you expect.

### Tip #6: Change the Bad Directory for Each Table / Group   {#Tip6}

If you are importing a large amount of data and have divided the files
you are importing into groups, then it's a good idea to change the
location of the bad record directory for each group; this will make
debugging bad records a lot easier for you.

You can change the value of the `badRecordDirectory` to include your
group name; for example, we typically use a strategy like the following:

<table style="width: 100%;">
                <col />
                <col />
                <thead>
                    <tr>
                        <th>Group Files Location</th>
                        <th><span class="CodeBoldFont">badRecordDirectory</span> Parameter Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>/data/mytable1/group1</code></td>
                        <td><code>/BAD/mytable1/group1</code></td>
                    </tr>
                    <tr>
                        <td><code>/data/mytable1/group2</code></td>
                        <td><code>/BAD/mytable1/group2</code></td>
                    </tr>
                    <tr>
                        <td><code>/data/mytable1/group3</code></td>
                        <td><code>/BAD/mytable1/group3</code></td>
                    </tr>
                </tbody>
            </table>
You'll then be able to more easily discover where the problem record is
located.

### Tip #7: Importing Multi-line Records   {#Tip7}

If your data contains line feed characters like `CTRL-M`, you need to
set the `oneLineRecords` parameter to `false`. Splice Machine will
accommodate to the line feeds; however, the import will take longer
because Splice Machine will not be able to break the file up and
distribute it across the cluster.

To improve import performance, avoid including line feed characters in
your data and set the `oneLineRecords` parameter to `true`.
{: .notePlain}

### Tip #8: Importing CLOBs and BLOBs   {#Tip8}

If you are importing `CLOB`s, pay careful attention to tips [4](#Tip4)
and [7](#Tip7). Be sure to use special characters for both your column
and character delimiters. If your `CLOB` data can span multiple lines,
be sure to set the `oneLineRecords` parameter to `false`.

At this time, the Splice Machine import procedures do not import work
with columns of type `BLOB`. You can create a virtual table interface
(VTI) that reads the `BLOB`s and inserts them into your database.

### Tip #9: Scripting Your Imports   {#Tip9}

You can make import tasks much easier and convenient by creating *import
scripts*. An import script is simply a call to one of the import
procedures; once you've verified that it works, you can use and clone
the script and run unattended imports.

An import script is simply a file in which you store `splice&gt;` commands
that you can execute with the `run` command. For example, here's an
example of a text file named `myimports.sql` that we can use to import
two csv files into our database:

<div class="preWrapperWide">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>call SYSCS_UTIL.IMPORT_DATA ('SPLICE','mytable1',null,'/data/mytable1/data.csv',null,null,null,null,null,0,'/BAD/mytable1',null,null);call SYSCS_UTIL.IMPORT_DATA ('SPLICE','mytable2',null,'/data/mytable2/data.csv',null,null,null,null,null,0,'/BAD/mytable2',null,null);
</code></pre>
        </div>

      </div>
To run an import script, use the `splice&gt; run` command; for example:

<div class="preWrapper">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>splice&gt; run 'myimports.sql';
</code></pre>
        </div>

      </div>
You can also start up the `splice&gt;` command line interpreter with the
name of a file to run; for example:

<div class="preWrapper">
        <div class="Example highlighter-rouge"><pre class="highlight"><code>sqlshell.sh -f myimports.sql
</code></pre>
        </div>

      </div>
In fact, you can script almost any sequence of Splice Machine commands
in a file and run that script within the command line interpreter or
when you start the interpreter.

## See Also

* [`SYSCS_UTIL.IMPORT_DATA`](sqlref_sysprocs_importdata.html)
* [`SYSCS_UTIL.UPSERT_DATA_FROM_FILE`](sqlref_sysprocs_upsertdata.html)
* [`SYSCS_UTIL.MERGE_DATA_FROM_FILE`](sqlref_sysprocs_mergedata.html)

&lt;/div&gt;
&lt;/section&gt;



[1]: https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html
</p></p></section>


    <div class="tags">
        
    </div>



</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Splice Machine, Inc. All rights reserved. <br />
 Site last generated: Sep 26, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

        <!-- Swiftype script for docstest -->

           <!-- Swiftype script for doc-->
    <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
      _st('install','eg_YmbQ_YzBTPNDdxQxT','2.0.0');
    </script>



</body>
    <!-- Only include analytics scripts if generating the customer docs -->

        <!-- Google Analytics Script: the ID gets auto inserted from the config file -->

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-35630173-2','auto');ga('require','displayfeatures');ga('send','pageview');</script>


        <!-- Marketo Analytics Script -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('331-FEU-348');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//munchkin.marketo.net/munchkin-beta.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>



</html>
