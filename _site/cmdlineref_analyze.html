<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Collects statistics for a table or schema.">
<meta name="keywords" content=" analyze, analyze command, statistics, stats, sample statistics, sampled, collection, analyze table, analyze schema, collect statistics">
<title>Analyze command | Splice Machine Documentation</title>
<meta class="swiftype" name="title" data-type="string" content="Analyze command">
<meta class="swiftype" name="info" data-type="string" content="Collects statistics for a table or schema.">

<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!--<link rel="stylesheet" href="css/lavish-bootstrap.css"> -->
<!--<link rel="stylesheet" href="css/customstyles.css"> -->
<link rel="stylesheet" href="css/splicemain.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container-fluid topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Splice Machine Internal Docs</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->
                
                    
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Splice Machine<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="index.html">Welcome</a></li>
                               
                             
                                
                                   <li><a href="tutorials_intro.html">Tutorials</a></li>
                               
                             
                                
                                   <li><a href="sqlref_intro.html">SQL Reference Manual</a></li>
                               
                             
                                
                                   <li><a href="developers_intro.html">Developer's Manual</a></li>
                               
                             
                                
                                   <li><a href="cmdlineref_intro.html">Command Line Reference</a></li>
                               
                             
                                
                                   <li><a href="dbconsole_intro.html">Database Console</a></li>
                               
                             
                                
                                   <li><a href="notes_intro.html">General Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">DB-Service Only<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="dbaas_intro.html">Welcome!</a></li>
                               
                             
                                
                                   <li><a href="dbaas_cm_intro.html">Cloud Manager Guide</a></li>
                               
                             
                                
                                   <li><a href="dbaas_zep_intro.html">Using Zeppelin</a></li>
                               
                             
                                
                                   <li><a href="dbaas_info_intro.html">Release Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">On-Premise-DB Only<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="onprem_intro.html">Welcome!</a></li>
                               
                             
                                
                                   <li><a href="onprem_install_intro.html">Installation</a></li>
                               
                             
                                
                                   <li><a href="onprem_admin_intro.html">Administrator's Guide</a></li>
                               
                             
                                
                                   <li><a href="onprem_info_intro.html">Release Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                
                <li>
<!-- Start Swiftype search -->
                    <div id="swiftype-search-container">
                        <form>
                          <input type="text" class="st-default-search-input swiftype-input">
                          <button type="submit" class="swiftype-submit">Search</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container-fluid">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Splice Machine 2.6.1</li>
    
    
    
    <li>
        <a href="#">Command Line Reference</a>
        <ul>
            
            
            
            <li><a href="cmdlineref_intro.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_cmdlinesyntax.html">Command Line Syntax</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Splice Machine Commands</a>
        <ul>
            
            
            
            <li class="active"><a href="cmdlineref_analyze.html">Analyze command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_autocommit.html">Autocommit command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_commit.html">Commit command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_execute.html">Execute command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_explainplan.html">Explain Plan command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_export.html">Export command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_prepare.html">Prepare command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_releasesavepoint.html">Release Savepoint command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_remove.html">Remove Command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_rollback.html">Rollback command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_rollbacktosavepoint.html">Rollback to Savepoint command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_savepoint.html">Savepoint command</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">On-Premise-Only Commands</a>
        <ul>
            
            
            
            <li><a href="cmdlineref_connect.html">Connect command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_describe.html">Describe command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_disconnect.html">Disconnect command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_elapsedtime.html">ElapsedTime command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_exit.html">Exit command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_help.html">Help command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_maximumdisplaywidth.html">MaximumDisplayWidth command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_run.html">Run command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_setconnection.html">Set Connection command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showconnections.html">Show Connections command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showfunctions.html">Show Functions command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showindexes.html">Show Indexes command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showprimarykeys.html">Show PrimaryKeys command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showprocedures.html">Show Procedures command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showroles.html">Show Roles command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showschemas.html">Show Schemas command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showsynonyms.html">Show Synonyms command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showtables.html">Show Tables command</a></li>
            
            
            
            
            
            
            <li><a href="cmdlineref_showviews.html">Show Views command</a></li>
            
            
            
            
        </ul>
     </li>
       
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-content">

<!--- Don't automatically put page summary at top - GRH 05/2017:
   
    <div class="summary">Collects statistics for a table or schema.</div>
   
-->

    


    

  <section>
<div class="TopicContent" data-swiftype-index="true">
    <h1 id="analyze-command">Analyze Command</h1>

    <p>The <span class="AppCommand">analyze</span> command collects statistics
for a specific table, or for an entire schema.</p>

    <p class="noteNote">Once statistics have been collected for a schema or table, they are
automatically used by the query optimizer.</p>

    <h2 id="syntax">Syntax</h2>

    <div class="fcnWrapperWide">
      <pre class="FcnSyntax"><code>ANALYZE TABLE [schemaName '.'] table-Name [ESTIMATE STATISTICS SAMPLE samplepercent PERCENT];
ANALYZE SCHEMA schema-Name;
</code></pre>

    </div>
    <div class="paramList">
      <p class="paramName">table-Name</p>

      <p class="paramDefnFirst">The name of the table you want to analyze, which can optionally be
qualified by its schema name. If you don’t specify a <em>schemaName</em>, the
current schema is assumed.</p>

      <p class="paramDefn">You must have insert permission for the table to be able to run this
command.</p>

      <p name="paramName" class="paramName">schema-Name</p>

      <p class="paramDefnFirst">The name of the schema you want to analyze.</p>

      <p class="paramDefn">You must have insert permission for all tables in the schema to be able
to run this command.</p>

      <p name="paramName" class="paramName">samplepercent</p>

      <p class="paramDefnFirst">A value between <code>0</code> and <code>100</code> that specifies the sampling percentage to
use when generating statistics for this table.</p>

      <p class="paramDefn">If you include this clause, statistics are generated by sampling the
specified sampling percentage of the table. This can significantly
reduce the overhead associated with generating statistics.</p>

      <p class="paramDefn">If you do not include this clause, statistics are generated based on the
full table.</p>

      <p class="paramDefnFirst">.</p>

    </div>
    <h3 id="Table">Analyze Table</h3>

    <p>The <code>ANALYZE TABLE</code> command collects statistics for a specific table in
the current schema. It also collects statistics for the index associated
with the table in the schema. For example, if you have the following in
your database:</p>

    <ul>
      <li>a table named <code>myTable</code></li>
      <li><code>myTable</code> has two indices: <code>myTableIndex1</code> and <code>myTableIndex2</code></li>
    </ul>

    <p>Then <code>ANALYZE TABLE</code> will collect statistics for <code>myTable</code>,
<code>myTableIndex1</code>, and <code>myTableIndex2</code>.</p>

    <p>The <code>ANALYZE TABLE</code> command displays the following information for each
partition of the table:</p>

    <table summary="List of columns in the output of the analyze table command.">
            <col />
            <col />
            <thead>
                <tr>
                    <th>Value</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>schemaName</code></td>
                    <td>The name of the schema.</td>
                </tr>
                <tr>
                    <td><code>tableName</code></td>
                    <td>The name of the table.</td>
                </tr>
                <tr>
                    <td><code>partition</code></td>
                    <td>The Splice Machine partition. We merge the statistics for all table partitions, so the partition will show as <code>-All-</code> when you specify one of the non-merged type values for the <code>statsType</code> parameter.</td>
                </tr>
                <tr>
                    <td><code>rowsCollected</code></td>
                    <td>The total number of rows collected for the table.</td>
                </tr>
                <tr>
                    <td><code>partitionSize</code></td>
                    <td>The combined size of the table's partitions.</td>
                </tr>
                <tr>
                    <td><code>statsType</code></td>
                    <td><p>The type of statistics, which is one of these values:</p>
                        <table>
                            <col />
                            <col />
                            <tbody>
                                <tr>
                                    <td>0</td>
                                    <td>Full table (not sampled) statistics that reflect the unmerged partition values.</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>Sampled statistics that reflect the unmerged partition values.</td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Full table (not sampled) statistics that reflect the table values after all partitions have been merged.</td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>Sampled statistics that reflect the table values after all partitions have been merged.</td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td><code>sampleFraction</code></td>
                    <td>
                        <p>The sampling percentage, expressed as <code>0.0</code> to <code>1.0</code>, </p>
                        <ul>
                            <li>If <code>statsType=0</code> or <code>statsType=1</code> (full statistics), this value is not used, and is shown as <code>0</code>.</li>
                            <li>If <code>statsType=2</code> or <code>statsType=3</code>, this value is the percentage or rows to be sampled. A value of <code>0</code> means no rows, and a value of <code>1</code> means all rows (same as full statistics).</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
    <h3 id="Schema">Analyze Schema</h3>

    <p>The <code>ANALYZE SCHEMA</code> command collects statistics for every table in the
schema. It also collects statistics for the index associated with every
table in the schema. For example, if you have the following situation:</p>

    <ul>
      <li>a schema named <code>mySchema</code></li>
      <li><code>mySchema</code> contains two tables: <code>myTable1</code> and <code>myTable2</code></li>
      <li><code>myTable1</code> has two indices: <code>myTable1Index1</code> and <code>myTable1Index2</code></li>
    </ul>

    <p>Then the <code>ANALYZE SCHEMA</code> command will collect statistics for
<code>myTable1</code>, <code>myTable2</code>, <code>myTable1Index1</code>, and <code>myTable1Index2</code>.</p>

    <p>The <code>ANALYZE SCHEMA</code> command displays the same information as shown for
<code>ANALYZE TABLE</code>, for each table in the in the schema.</p>

    <p class="noteNote">This command operates like the
<a href="sqlref_sysprocs_collectschemastats.html"><code>SYSCS_UTIL.COLLECT_SCHEMA_STATISTICS</code></a>
built-in system procedure.</p>

    <h2 id="examples">Examples</h2>

    <div class="preWrapperWide">
      <pre class="AppCommand"><code>splice&gt; analyze table test.t2;
schemaName |tableName |partition |rowsCollec&amp;|partitionSize |partitionCount  |statsType  |sampleFraction
-----------------------------------------------------------------------------------------------------------------
TEST       |T2        |-All-     |39226      |235356        |1               |2          |0

1 rows selected
splice&gt;splice&gt; analyze table test.t2 estimate statistics sample 50 percent;
schemaName |tableName |partition |rowsCollec&amp;|partitionSize |partitionCount  |statsType  |sampleFraction
-----------------------------------------------------------------------------------------------------------------
TEST       |T2        |-All-     |19613      |235356        |1               |3          |0.5

1 rows selected
splice&gt;splice&gt; analyze schema test;
schemaName |tableName |partition |rowsCollec&amp;|partitionSize |partitionCount  |statsType  |sampleFraction
-----------------------------------------------------------------------------------------------------------------
TEST       |T2        |-All-     |39226      |235356        |1               |2          |0
TEST       |T5        |-All-     |39226      |235356        |1               |2          |0
2 rows selected
splice&gt;
</code></pre>

    </div>
  </div>
</section>


    <div class="tags">
        
    </div>



</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Splice Machine, Inc. All rights reserved. <br />
 Site last generated: Sep 28, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

        <!-- Swiftype script for docstest -->

    <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
      _st('install','YGtH3zGt4NJzs35yCo5A','2.0.0');
    </script>




</body>
    <!-- Only include analytics scripts if generating the customer docs -->


</html>
