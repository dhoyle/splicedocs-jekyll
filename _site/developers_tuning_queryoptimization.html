<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Gets you started with using and optimizing your queries with Splice Machine.">
<meta name="keywords" content=" optimizing, explain plan, statistics, indexes, hints, query hints, select without table, index hint, join order hint, join strategy hint, pinned table hint, spark hint, usespark, delete hint, bulk delete, hfile delete, delete hfile, splice-properties, hints, hinting, --splice-properties, broadcast join, outer join, natural join, joinorder, fixed, joinstrategy, sortmerge, nestedloop, merge">
<title>Query Optimization | Splice Machine Documentation</title>
<meta class="swiftype" name="title" data-type="string" content="Query Optimization">
<meta class="swiftype" name="info" data-type="string" content="Gets you started with using and optimizing your queries with Splice Machine.">

<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!--<link rel="stylesheet" href="css/lavish-bootstrap.css"> -->
<!--<link rel="stylesheet" href="css/customstyles.css"> -->
<link rel="stylesheet" href="css/splicemain.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container-fluid topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Splice Machine Documentation</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- toggle sidebar button -->
                <li><a id="tg-sb-link" href="#"><i id="tg-sb-icon" class="fa fa-toggle-on"></i> Nav</a></li>
                <!-- entries without drop-downs appear here -->
                
                    
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Splice Machine<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="index.html">Welcome</a></li>
                               
                             
                                
                                   <li><a href="tutorials_intro.html">Tutorials</a></li>
                               
                             
                                
                                   <li><a href="sqlref_intro.html">SQL Reference Manual</a></li>
                               
                             
                                
                                   <li><a href="developers_intro.html">Developer's Manual</a></li>
                               
                             
                                
                                   <li><a href="cmdlineref_intro.html">Command Line Reference</a></li>
                               
                             
                                
                                   <li><a href="dbconsole_intro.html">Database Console</a></li>
                               
                             
                                
                                   <li><a href="notes_intro.html">General Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">DB-Service Only<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="dbaas_intro.html">Welcome!</a></li>
                               
                             
                                
                                   <li><a href="dbaas_cm_intro.html">Cloud Manager Guide</a></li>
                               
                             
                                
                                   <li><a href="dbaas_zep_intro.html">Using Zeppelin</a></li>
                               
                             
                                
                                   <li><a href="dbaas_info_intro.html">Release Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                      <li class="dropdown">
                          <a href="#" class="dropdown-toggle" data-toggle="dropdown">On-Premise-DB Only<b class="caret"></b></a>
                          <ul class="dropdown-menu">
                             
                                
                                   <li><a href="onprem_intro.html">Welcome!</a></li>
                               
                             
                                
                                   <li><a href="onprem_install_intro.html">Installation</a></li>
                               
                             
                                
                                   <li><a href="onprem_admin_intro.html">Administrator's Guide</a></li>
                               
                             
                                
                                   <li><a href="onprem_info_intro.html">Release Information</a></li>
                               
                             
                          </ul>
                      </li>
                   
                
                <li>
<!-- Start Swiftype search -->
                    <div id="swiftype-search-container">
                        <form>
                          <input type="text" class="st-default-search-input swiftype-input">
                          <button type="submit" class="swiftype-submit">Search</button>
                        </form>
                    </div>
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container-fluid">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
    <li class="sidebarTitle">Splice Machine 2.6.1</li>
    
    
    
    <li>
        <a href="#">Developer's Guide</a>
        <ul>
            
            
            
            <li><a href="developers_intro.html">Introduction</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Fundamentals</a>
        <ul>
            
            
            
            <li><a href="developers_fundamentals_intro.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_transactions.html">Running Transactions</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_dates.html">Working with Date and Time Values</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_triggers.html">Using Database Triggers</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_foreignkeys.html">Using Foreign Keys</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_windowfcns.html">Using Window Functions</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_temptables.html">Using Temporary Tables</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_auth.html">Roles and Authorization</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_sparklibs.html">Using Spark Libraries</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_vti.html">Using the Virtual Table Interface</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_externaltables.html">Using External Tables</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_hcatalog.html">Using HCatalog</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_mapreduce.html">Using the MapReduce API</a></li>
            
            
            
            
            
            
            <li><a href="developers_fundamentals_hbase.html">Working with HBase</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Functions and Stored Procedures</a>
        <ul>
            
            
            
            <li><a href="developers_fcnsandprocs_intro.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="developers_fcnsandprocs_writing.html">Writing Functions and Stored Procedures</a></li>
            
            
            
            
            
            
            <li><a href="developers_fcnsandprocs_storing.html">Storing/Updating Functions and Procs</a></li>
            
            
            
            
            
            
            <li><a href="developers_fcnsandprocs_examples.html">Examples</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Ingesting and Streaming Data</a>
        <ul>
            
            
            
            <li><a href="tutorials_ingest_intro.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_uploadtos3.html">Uploading Data to an S3 Bucket</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_configures3.html">Configuring an S3 Bucket</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_tpch1.html">Importing TPCH Data</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_importing.html">Importing Your Data</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_hfiles.html">Importing Data as HFiles</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_kafkaproducer.html">Kafka - Creating a Producer</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_kafkafeed.html">Kafka - Configuring a Feed</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_mqttSpark.html">MQTT Spark Streaming</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ingest_storm.html">Apache Storm and Splice Machine</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Analytics and Machine Learning</a>
        <ul>
            
            
            
            <li><a href="tutorials_ml_intro.html">Introduction</a></li>
            
            
            
            
            
            
            <li><a href="tutorials_ml_zeppelin.html">Using Apache Zeppelin</a></li>
            
            
            
            
        </ul>
     </li>
       
        
    
    <li>
        <a href="#">Tuning and Debugging</a>
        <ul>
            
            
            
            <li><a href="developers_tuning_intro.html">Introduction</a></li>
            
            
            
            
            
            
            <li class="active"><a href="developers_tuning_queryoptimization.html">Optimizing Queries</a></li>
            
            
            
            
            
            
            <li><a href="developers_tuning_usingstats.html">Using Statistics</a></li>
            
            
            
            
            
            
            <li><a href="developers_tuning_explainplan.html">Using Explain Plan</a></li>
            
            
            
            
            
            
            <li><a href="developers_tuning_explainplan_examples.html">Explain Plan Examples</a></li>
            
            
            
            
            
            
            <li><a href="developers_tuning_logging.html">Logging</a></li>
            
            
            
            
            
            
            <li><a href="developers_tuning_debugging.html">Debugging</a></li>
            
            
            
            
            
            
            <li><a href="developers_tuning_snapshots.html">Using Snapshots</a></li>
            
            
            
            
        </ul>
     </li>
       
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            

<div class="post-content">

<!--- Don't automatically put page summary at top - GRH 05/2017:
   
    <div class="summary">Gets you started with using and optimizing your queries with Splice Machine.</div>
   
-->

    


    

  <section>
<div class="TopicContent" data-swiftype-index="true">
    <h1 id="optimizing-splice-machine-queries">Optimizing Splice Machine Queries</h1>

    <p>This topic introduces you to Splice Machine query optimization
techniques, including information about executing SQL expressions
without a table context, and using optimization hints.</p>

    <h2 id="introduction-to-query-optimization">Introduction to Query Optimization</h2>

    <p>Here are a few mechanisms you can use to optimize your Splice Machine
queries:</p>

    <table summary="Query optimization mechanisms">
<thead>
<tr><th>Optimization Mechanism</th><th>Description</th></tr>
</thead>
<tbody>
<tr>
<td>Use Explain Plan</td>
<td>
<p>You can use the Splice Machine Explain Plan facility to display the execution plan for a statement without actually executing the statement. You can use Explain Plan to help determine options such as which join strategy to use or which index to select.</p>
<p>See the <a href="developers_tuning_explainplan.html">About Explain Plan</a> topic.</p>
</td>
</tr>
<tr>
<td>Use Statistics</td>
<td>Your database administrator can refine which statistics are collected on your database, which in turn enhances the operation of the query optimizer. See the <a href="developers_tuning_usingstats.html">Using Statistics</a> topic.</td>
</tr>
<tr>
<td>Use <code>WHERE</code> clauses</td>
<td>Use a <code>WHERE</code> clause in your queries to restrict how much data is scanned.</td>
</tr>
<tr>
<td>Use indexes</td>
<td>
<p class="noSpaceAbove">You can speed up a query by having an index on the criteria used in the <code>WHERE</code> clause, or if the <code>WHERE</code> clause is using a primary key.</p>
<p>Composite indexes work well for optimizing queries.</p>
</td>
</tr>
<tr>
<td>Use Splice Machine <em>query hints</em></td>
<td>The Splice Machine query optimizer allows you to <a href="#Using">provide hints</a> to help in the optimization process.</td>
</tr>
</tbody>
</table>
    <h2 id="Using">Using Select Without a Table</h2>

    <p>Sometimes you want to execute SQL scalar expressions without having a
table context. For example, you might want to create a query that
evaluates an expression and returns a table with a single row and one
column. Or you might want to evaluate a list of comma-separated
expressions and return a table with a single row and multiple columns
one for each expression.</p>

    <p>In Splice Machine, you can execute queries without a table by using the
<code>sysibm.sysdummy1</code> dummy table. Here’s the syntax:</p>

    <div class="fcnWrapperWide">
      <pre class="FcnSyntax"><code>select expression FROM sysibm.dummy1
</code></pre>

    </div>
    <p>And here’s an example:</p>

    <div class="preWrapper">
      <pre class="Example"><code>splice&gt; select 1+ 1 from sysibm.sysdummy1;
</code></pre>

    </div>
    <h2 id="using-splice-machine-query-hints">Using Splice Machine Query Hints</h2>

    <p>You can use <em>hints</em> to help the Splice Machine query interface optimize
your database queries.</p>

    <p class="noteNote">The Splice Machine optimizer is constantly being improved, and new hint
types sometimes get added. One recent addition is the ability to specify
that a query should be run on (or not on) Spark, if possible.</p>

    <h3 id="types-of-hints">Types of Hints</h3>

    <p>There are different kinds of hints you can supply, each of which is
described in a section below; here’s a summary:</p>

    <table summary="Splice Machine hint types">
      <thead>
        <tr>
          <th>Hint Type</th>
          <th>Examples</th>
          <th>Used to Specify</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><a href="#Index">Index</a></td>
          <td><code>--splice-properties index=my_index</code></td>
          <td>Which index to use or not use</td>
        </tr>
        <tr>
          <td><a href="#JoinOrder">Join Order</a></td>
          <td><code>--splice-properties joinOrder=fixed</code></td>
          <td>Which join order to use for two tables</td>
        </tr>
        <tr>
          <td><a href="#JoinStrategy">Join Strategy</a></td>
          <td><code>--splice-properties joinStrategy=sortmerge</code></td>
          <td>How a join is processed (in conjunction with the Join Order hint)</td>
        </tr>
        <tr>
          <td><a href="#Pinned">Pinned Table</a></td>
          <td><code>--splice-properties pin=true</code></td>
          <td>That you want the pinned (cached in memory) version of a table used in a query</td>
        </tr>
        <tr>
          <td><a href="#Spark">Spark</a></td>
          <td><code>--splice-properties useSpark=true</code></td>
          <td>That you want a query to run (or not run) on Spark</td>
        </tr>
        <tr>
          <td><a href="#Delete">Delete</a></td>
          <td><code>--splice-properties bulkDeleteDirectory='/path'</code></td>
          <td>That you are deleting a large amount of data and want to bypass the normal write pipeline to speed up the deletion.</td>
        </tr>
      </tbody>
    </table>

    <h3 id="including-hints-in-your-queries">Including Hints in Your Queries</h3>

    <p>Hints MUST ALWAYS be at the end of a line, meaning that you must always
terminate hints with a newline character.</p>

    <p>You cannot add the semicolon that terminates the command immediately
after a hint; the semicolon must go on the next line, as shown in the
examples in this topic.</p>

    <p class="noteIcon">Many of the examples in this section show usage of hints on the
<code>splice&gt;</code> command line. Follow the same rules when using hints
programmatically.</p>

    <p>Hints can be used in two locations: after a table identifier or after a
<code>FROM</code> clause. Some hint types can be use after a table identifier, and
some can be used after a <code>FROM</code> clause:</p>

    <table>
<thead>
<tr><th>Hint after a:</th><th>Hint types</th><th>Example</th></tr>
</thead>
<tbody>
<tr>
<td>Table identifier</td>
<td class="CodeFont">
<p>index</p>
<p>joinStrategy</p>
<p>pin</p>
<p>useSpark</p>
<p>bulkDeleteDirectory</p>
</td>
<td><code><span class="Example">SELECT * FROM<br />    member_info m, rewards r,<br />   points p --SPLICE-PROPERTIES index=ie_point WHERE...</span></code></td>
</tr>
<tr>
<td>A <code>FROM</code> clause</td>
<td class="CodeFont">
<p>joinOrder</p>
</td>
<td><code><span class="Example">SELECT * FROM --SPLICE-PROPERTIES joinOrder=fixed<br />   mytable1 e, mytable2 t<br />   WHERE e.id = t.parent_id;</span></code></td>
</tr>
</tbody>
</table>
    <p>This example shows proper placement of the hint and semicolon when the
hint is at the end of statement:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>SELECT * FROM my_table --splice-properties index=my_index;
</code></pre>

    </div>
    <p>If your command is broken into multiple lines, you still must add the
hints at the end of the line, and you can add hints at the ends of
multiple lines; for example:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>SELECT * FROM my_table_1 --splice-properties index=my_index
, my_table_2 --splice-properties index=my_index_2
WHERE my_table_1.id = my_table_2.parent_id;
</code></pre>

    </div>
    <p class="noteNote">In the above query, the first command line ends with the first index
hint, because hints must always be the last thing on a command line.
That’s why the comma separating the table specifications appears at the
beginning of the next line.</p>

    <h3 id="Index">Index Hints</h3>

    <p>Use <em>index hints</em> to tell the query interface how to use certain indexes
for an operation.</p>

    <p>To force the use of a particular index, you can specify the index name;
for example:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; SELECT * FROM my_table --splice-properties index=my_index
&gt; ;
</code></pre>

    </div>
    <p>To tell the query interface to not use an index for an operation,
specify the null index. For example:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; SELECT * FROM my_table --splice-properties index=null
&gt; ;
</code></pre>

    </div>
    <p>And to tell the query interface to use specific indexes on specific
tables for an operation, you can add multiple hints. For example:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; SELECT * FROM my_table_1   --splice-properties index=my_index
&gt; , my_table_2                --splice-properties index=my_index_2
&gt; WHERE my_table_1.id = my_table_2.parent_id;
</code></pre>

    </div>
    <h4 id="important-note-about-placement-of-index-hints">Important Note About Placement of Index Hints</h4>

    <p>Each <code>index</code> hint in a query <strong>MUST</strong> be specified alongside the table
containing the index, or an error will occur.</p>

    <p>For example, if we have a table named <code>points</code> with an index named
<code>ie_point</code> and another table named <code>rewards</code> with an index named
<code>ie_rewards</code>, then this hint works as expected:</p>

    <div class="preWrapper">
      <pre class="Example"><code>SELECT * FROM   member_info m,
   rewards r,
   points p    --SPLICE-PROPERTIES index=ie_point
WHERE...
</code></pre>

    </div>
    <p>But the following hint will generate an error because <code>ie_rewards</code> is
not an index on the points table.</p>

    <div class="preWrapper">
      <pre class="Example"><code>SELECT * FROM
   member_info m,
   rewards r,
   points p    --SPLICE-PROPERTIES index=ie_rewards
WHERE...
</code></pre>

    </div>
    <h3 id="JoinOrder">JoinOrder Hints</h3>

    <p>Use <code>JoinOrder</code> hints to tell the query interface in which order to join
two tables. You can specify these values for a <code>JoinOrder</code> hint:</p>

    <ul>
      <li>Use <code>joinOrder=FIXED</code> to tell the query optimizer to order the table
join according to how where they are named in the <code>FROM</code> clause.</li>
      <li>
        <p>Use <code>joinOrder=UNFIXED</code> to specify that the query optimizer can
rearrange the table order.</p>

        <p class="noteNote"><code>joinOrder=UNFIXED</code> is the default, which means that you don’t need to
specify this hint to allow the optimizer to rearrange the table order.</p>
      </li>
    </ul>

    <p>Here are examples:</p>

    <table summary="Examples of joinOrder hints">
      <thead>
        <tr>
          <th>Hint</th>
          <th>Example</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>joinOrder=FIXED</code></td>
          <td><code>splice&gt; SELECT * FROM --SPLICE-PROPERTIES joinOrder=fixed&gt;  mytable1 e, mytable2 t&gt; WHERE e.id = t.parent_id;</code></td>
        </tr>
        <tr>
          <td><code>joinOrder=UNFIXED</code></td>
          <td><code>splice&gt; SELECT * from --SPLICE-PROPERTIES joinOrder=unfixed&gt; mytable1 e, mytable2 t WHERE e.id = t.parent_id;</code></td>
        </tr>
      </tbody>
    </table>

    <h3 id="JoinStrategy">JoinStrategy Hints</h3>

    <p>You can use a <code>JoinStrategy</code> hint in conjunction with a <code>joinOrder</code> hint
to tell the query interface how to process a join. For example, this
query specifies that the <code>SORTMERGE</code> join strategy should be used:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>SELECT * FROM      --SPLICE-PROPERTIES joinOrder=fixed
   mytable1 e, mytable2 t --SPLICE-PROPERTIES joinStrategy=SORTMERGE
   WHERE e.id = t.parent_id;
</code></pre>

    </div>
    <p>And this uses a <code>joinOrder</code> hint along with two <code>joinStrategy</code> hints:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>SELECT *
  FROM --SPLICE-PROPERTIES joinOrder=fixed
  keyword k
  JOIN campaign c  --SPLICE-PROPERTIES joinStrategy=NESTEDLOOP
    ON k.campaignid = c.campaignid
  JOIN adgroup g  --SPLICE-PROPERTIES joinStrategy=NESTEDLOOP
    ON k.adgroupid = g.adgroupid
  WHERE adid LIKE '%us_gse%'
</code></pre>

    </div>
    <p>You can specify these join strategies:</p>

    <table summary="Join strategy hint types">
<tbody>
<tr><th>JoinStrategy Value</th><th>Strategy Description</th></tr>
<tr>
<td><code>BROADCAST</code></td>
<td>
<p class="noSpaceAbove">Read the results of the Right Result Set (<em>RHS</em>) into memory, then for each row in the left result set (<em>LHS</em>), perform a local lookup to determine the right side of the join.</p>
<p class="noSpaceAbove"><code>BROADCAST</code> will only work on equijoin (<code>=</code>) predicates that do not include a function call.</p>
</td>
</tr>
<tr>
<td><code>MERGE</code></td>
<td>
<p class="noSpaceAbove">Read the Right and Left result sets simultaneously in order and join them together as they are read.</p>
<p class="noSpaceAbove"><code>MERGE</code> joins require that both the left and right result sets be sorted according to the join keys. <code>MERGE</code> requires an equijoin predicate that does not include a function call.</p>
</td>
</tr>
<tr>
<td><code>NESTEDLOOP</code></td>
<td>
<p>For each row on the left, fetch the values on the right that match the join.</p>
<p><code>NESTEDLOOP</code> is the only join that can work with any join predicate of any type; however this type of join is generally very slow.</p>
</td>
</tr>
<tr>
<td><code>SORTMERGE</code></td>
<td>
<p class="noSpaceAbove">Re-sort both the left and right sides according to the join keys, then perform a <code>MERGE</code> join on the results.</p>
<p class="noSpaceAbove"><code>SORTMERGE</code> requires an equijoin predicate with no function calls.</p>
</td>
</tr>
</tbody>
</table>
    <h3 id="Pinned">Pinned Table Hint</h3>

    <p class="indentLevel1">You can use the <code>pin</code> hint to specify to specify that you want a query
to run against a pinned version of a table.</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; PIN TABLE myTable;splice&gt; SELECT COUNT(*) FROM my_table --splice-properties pin=true&gt; ;
</code></pre>

    </div>
    <p class="indentLevel1">You can read more about pinning tables in the
<a href="sqlref_statements_pintable.html"><code>PIN TABLE</code></a> statement topic.</p>

    <h3 id="Spark">Spark Hints</h3>

    <p class="indentLevel1">You can use the <code>useSpark</code> hint to specify to the optimizer that you
want a query to run on (or not on) Spark. The Splice Machine query
optimizer automatically determines whether to run a query through our
Spark engine or our HBase engine, based on the type of query; you can
override this by using a hint:</p>

    <p class="noteNote">The Splice Machine optimizer uses its estimated cost for a query to
decide whether to use spark. If your statistics are out of date, the
optimizer may end up choosing the wrong engine for the query.</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; SELECT COUNT(*) FROM my_table --splice-properties useSpark=true&gt; ;
</code></pre>

    </div>
    <p class="indentLevel1">You can also specify that you want the query to run on HBase and not on
Spark. For example:</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; SELECT COUNT(*) FROM your_table --splice-properties useSpark=false&gt; ;
</code></pre>

    </div>
    <h3 id="Delete">Delete Hints</h3>

    <p class="indentLevel1">You can use the <code>bulkDeleteDirectory</code> hint to specify that you want to
use our bulk delete feature to optimize the deletion of a large amount
of data. Similar to our <a href="tutorials_ingest_hfiles.html">bulk import
feature</a>, bulk delete generates HFiles,
which allows us to bypass the Splice Machine write pipeline and HBase
write path when performing the deletion. This can significantly speed up
the deletion process.</p>

    <p class="indentLevel1">You need to specify the directory to which you want the temporary HFiles
written; you must have write permissions on this directory to use this
feature. If you’re specifying an S3 bucket on AWS, please review our
<a href="tutorials_ingest_configures3.html">Configuring an S3 Bucket for Splice Machine
Access</a> tutorial before proceeding.</p>

    <div class="preWrapperWide">
      <pre class="Example"><code>splice&gt; DELETE FROM my_table --splice-properties bulkDeleteDirectory='/bulkFilesPath'
;
</code></pre>

    </div>
    <p class="noteNote">We recommend performing a major compaction on your database after
deleting a large amount of data; you should also be aware of our new
<a href="sqlref_sysprocs_purgedeletedrows.html"><code>SYSCS_UTIL.SET_PURGE_DELETED_ROWS</code></a>
system procedure, which you can call before a compaction to specify that
you want the data physically (not just logically) deleted during
compaction.</p>

  </div>
</section>


    <div class="tags">
        
    </div>



</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2017 Splice Machine, Inc. All rights reserved. <br />
 Site last generated: Nov 12, 2017 <br />
<p><img src="images/company_logo.png" alt="Company logo"/></p>
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

        <!-- Swiftype script for docstest -->

           <!-- Swiftype script for doc-->
    <script type="text/javascript">
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
      _st('install','eg_YmbQ_YzBTPNDdxQxT','2.0.0');
    </script>



</body>
    <!-- Only include analytics scripts if generating the customer docs -->

        <!-- Google Analytics Script: the ID gets auto inserted from the config file -->

<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-35630173-2','auto');ga('require','displayfeatures');ga('send','pageview');</script>


        <!-- Marketo Analytics Script -->
<script type="text/javascript">
(function() {
  var didInit = false;
  function initMunchkin() {
    if(didInit === false) {
      didInit = true;
      Munchkin.init('331-FEU-348');
    }
  }
  var s = document.createElement('script');
  s.type = 'text/javascript';
  s.async = true;
  s.src = '//munchkin.marketo.net/munchkin-beta.js';
  s.onreadystatechange = function() {
    if (this.readyState == 'complete' || this.readyState == 'loaded') {
      initMunchkin();
    }
  };
  s.onload = initMunchkin;
  document.getElementsByTagName('head')[0].appendChild(s);
})();
</script>



</html>
